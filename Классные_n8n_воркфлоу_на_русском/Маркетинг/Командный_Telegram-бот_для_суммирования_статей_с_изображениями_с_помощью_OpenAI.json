{
  "meta": {
    "instanceId": "5aaf4236c70e34e423fbdb2c7b754d19253a933bb1476d548f75848a01e473cf",
    "templateCredsSetupCompleted": true
  },
  "nodes": [
    {
      "id": "3da9ae2c-8134-437b-8ada-dcbee9c7fca5",
      "name": "Route: Check for Help Command",
      "type": "n8n-nodes-base.if",
      "notes": "Checks if incoming message starts with /help command and routes accordingly",
      "position": [
        -1680,
        180
      ],
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json[\"message\"][\"text\"]}}",
              "value2": "/help",
              "operation": "startsWith"
            }
          ]
        }
      },
      "typeVersion": 1
    },
    {
      "id": "70602bcc-9395-4fc6-bfbe-e6df5819e6e7",
      "name": "Response: Send Help Menu",
      "type": "n8n-nodes-base.telegram",
      "notes": "Sends formatted help message with available commands and usage examples",
      "position": [
        -1420,
        -220
      ],
      "webhookId": "ab573ae8-05e4-41bb-bec7-fca1233fc0bb",
      "parameters": {
        "text": "ü§ñ *Help Menu*\n\nUse `/summary <link>` to summarize an article.\nUse `/img <prompt>` to generate an image.\n\n_Example:_\n/summary https://example.com\n/img a futuristic cityscape",
        "chatId": "={{$json[\"message\"][\"chat\"][\"id\"]}}",
        "additionalFields": {
          "parse_mode": "Markdown"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "df301046-be3d-4612-aeb3-c1138968a32e",
      "name": "Route: Check for Summary Command",
      "type": "n8n-nodes-base.if",
      "notes": "Identifies /summary commands and routes them to the article summarization workflow",
      "position": [
        -1400,
        100
      ],
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json[\"message\"][\"text\"]}}",
              "value2": "/summary",
              "operation": "startsWith"
            }
          ]
        }
      },
      "typeVersion": 1
    },
    {
      "id": "3c0f03df-5244-48b0-a9f6-249547b4a4a1",
      "name": "Route: Check for Image Command",
      "type": "n8n-nodes-base.if",
      "notes": "Detects /img commands and routes them to the image generation workflow",
      "position": [
        -980,
        340
      ],
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json[\"message\"][\"text\"]}}",
              "value2": "/img",
              "operation": "startsWith"
            }
          ]
        }
      },
      "typeVersion": 1
    },
    {
      "id": "f182faa1-0171-4794-9735-3c84986754fb",
      "name": "Response: Send Article Summary",
      "type": "n8n-nodes-base.telegram",
      "notes": "Sends the AI-generated article summary back to the user via Telegram",
      "position": [
        -140,
        -80
      ],
      "webhookId": "c6f19898-b638-4e42-b377-d7664087ab0b",
      "parameters": {
        "text": "={{$json[\"candidates\"][0][\"content\"][\"parts\"][0][\"text\"]}}",
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "additionalFields": {}
      },
      "typeVersion": 1
    },
    {
      "id": "301a03bc-50dc-46fe-b423-039f4e3ea7dd",
      "name": "Response: Send Image Generation Notice",
      "type": "n8n-nodes-base.telegram",
      "notes": "Notifies user that image generation request was processed (placeholder for actual image generation)",
      "position": [
        -20,
        280
      ],
      "webhookId": "b5fb6529-a924-4885-8d6c-17073ce29bb0",
      "parameters": {
        "text": "üñºÔ∏è Generated image prompt submitted! Gemini image model doesn't return images directly. Use image generation APIs like Stability for actual image URLs.",
        "chatId": "={{$json[\"message\"][\"chat\"][\"id\"]}}",
        "additionalFields": {}
      },
      "typeVersion": 1
    },
    {
      "id": "0204de3d-cfdf-4562-927b-f65777aaaeb1",
      "name": "Trigger: Telegram Webhook",
      "type": "n8n-nodes-base.telegramTrigger",
      "notes": "Listens for incoming messages from Telegram bot and initiates the workflow",
      "position": [
        -1940,
        20
      ],
      "webhookId": "61f2e55d-a41d-4594-a045-154264c78738",
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "typeVersion": 1.2
    },
    {
      "id": "caba10fb-e86c-480b-ab81-c6a42976683b",
      "name": "Fetch: Download Article Content",
      "type": "n8n-nodes-base.httpRequest",
      "notes": "Downloads the HTML content from the provided URL with proper user agent headers",
      "position": [
        -1040,
        -20
      ],
      "parameters": {
        "url": "={{ $json.message.link_preview_options.url }}",
        "options": {},
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0"
            }
          ]
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "a61c2bd8-7b6d-4710-b453-086905aae741",
      "name": "Parse: Extract Text from HTML",
      "type": "n8n-nodes-base.html",
      "notes": "Extracts clean text content from HTML, excluding navigation elements and images",
      "position": [
        -820,
        -20
      ],
      "parameters": {
        "options": {},
        "operation": "extractHtmlContent",
        "extractionValues": {
          "values": [
            {
              "key": "text",
              "cssSelector": "body",
              "skipSelectors": "svg, a"
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "318cbba7-3240-44f8-be69-33738db1c97d",
      "name": "AI: Generate Article Summary",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "notes": "Uses OpenAI to create a structured summary with 10-12 bullet points from the extracted article text",
      "position": [
        -600,
        -20
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "options": {},
        "messages": {
          "values": [
            {
              "content": "=–°—É–º–º–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∏–∂–µ –∫–æ–Ω—Ç–µ–Ω—Ç –≤ 10‚Äì12 –∫—Ä–∞—Ç–∫–∏—Ö –ø—É–Ω–∫—Ç–æ–≤. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç –æ—Ç—Ä–∞–∂–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏ –≤–∞–∂–Ω—ã–π –∞—Å–ø–µ–∫—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –æ—Ö–≤–∞—Ç—ã–≤–∞—è –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–¥–µ–∏, –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç—ã, –æ—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã –∏ –≤–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã. –ò–∑–±–µ–≥–∞–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —è—Å–Ω—ã–π, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —è–∑—ã–∫, –ø–æ–¥—Ö–æ–¥—è—â–∏–π –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–º —Ä–µ—à–µ–Ω–∏—è."
            }
          ]
        }
      },
      "credentials": {
        "openAiApi": {
          "id": "7dME1fmMlkFyzFjq",
          "name": "OpenAi account 2"
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "da0dcfc6-6064-4983-801f-fd45a5034a62",
      "name": "AI: Process Image Generation Request",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "notes": "Processes image generation request using OpenAI (currently returns text response instead of actual image)",
      "position": [
        -760,
        240
      ],
      "parameters": {
        "options": {},
        "resource": "image"
      },
      "typeVersion": 1.8
    },
    {
      "id": "50af4fa8-dc8a-4ef6-82b8-f37c17919b2b",
      "name": "StickyNote",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2700,
        -360
      ],
      "parameters": {
        "width": 600,
        "height": 880,
        "content": "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:"
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Response: Send Help Menu": {
      "main": [
        [
          {
            "node": "Route: Check for Help Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trigger: Telegram Webhook": {
      "main": [
        [
          {
            "node": "Route: Check for Help Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI: Generate Article Summary": {
      "main": [
        [
          {
            "node": "Response: Send Article Summary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse: Extract Text from HTML": {
      "main": [
        [
          {
            "node": "AI: Generate Article Summary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route: Check for Help Command": {
      "main": [
        [
          {
            "node": "Response: Send Help Menu",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Route: Check for Summary Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route: Check for Image Command": {
      "main": [
        [
          {
            "node": "AI: Process Image Generation Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch: Download Article Content": {
      "main": [
        [
          {
            "node": "Parse: Extract Text from HTML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route: Check for Summary Command": {
      "main": [
        [
          {
            "node": "Fetch: Download Article Content",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Route: Check for Image Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI: Process Image Generation Request": {
      "main": [
        [
          {
            "node": "Response: Send Image Generation Notice",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}