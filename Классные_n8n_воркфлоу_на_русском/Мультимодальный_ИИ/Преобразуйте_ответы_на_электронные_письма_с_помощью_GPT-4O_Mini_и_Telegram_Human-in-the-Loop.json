{
  "id": "YLSKn2I6JNP4P8CK",
  "meta": {
    "instanceId": "eeeea7146847987be5efe39e9c497fe2ba348b50cc97aad5f200b254e0a38282"
  },
  "name": "‚úÖ 4. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á API OpenAI",
  "tags": [],
  "nodes": [
    {
      "id": "4f162485-7021-436f-ad6e-762d7a7dcb86",
      "name": "Email Received (IMAP)",
      "type": "n8n-nodes-base.emailReadImap",
      "position": [
        -1160,
        400
      ],
      "parameters": {
        "mailbox": "Inbox",
        "options": {}
      },
      "typeVersion": 2
    },
    {
      "id": "de1cf386-a4c9-4ec9-a398-117ad7de8b03",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "position": [
        -720,
        400
      ],
      "parameters": {
        "mode": "combine",
        "options": {},
        "combineBy": "combineByPosition"
      },
      "typeVersion": 3.2
    },
    {
      "id": "857f71d6-76b9-44b9-8b4e-22aa1c3775c7",
      "name": "Extract Text",
      "type": "n8n-nodes-base.set",
      "position": [
        -940,
        480
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "f59b00c0-290c-4aed-8ab8-596ec721663a",
              "name": "text",
              "type": "string",
              "value": "={{ $json.textPlain }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "64182ab8-9ad7-493c-a81c-41b505905050",
      "name": "Send Chick-fil-A Style Reply",
      "type": "n8n-nodes-base.emailSend",
      "position": [
        840,
        560
      ],
      "webhookId": "b0ec56ac-ef76-4be0-bfa3-54021ab45812",
      "parameters": {
        "text": "={{ $json.message.content }}",
        "options": {
          "appendAttribution": false
        },
        "subject": "SUBJECT",
        "toEmail": "={{ $json.email }}",
        "fromEmail": "YOUR_EMAIL",
        "emailFormat": "text"
      },
      "typeVersion": 2.1
    },
    {
      "id": "370254c1-2025-436b-8434-975a20147142",
      "name": "Merge1",
      "type": "n8n-nodes-base.merge",
      "position": [
        620,
        560
      ],
      "parameters": {
        "mode": "combine",
        "options": {},
        "combineBy": "combineByPosition"
      },
      "typeVersion": 3.2
    },
    {
      "id": "3d921b92-5f5c-44e1-b1e3-ae2fe7629af1",
      "name": "Chick-Fil-A Translator",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        260,
        280
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini",
          "cachedResultName": "GPT-4O-MINI"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "–í—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫. –í–∞—à–∞ —Ä–∞–±–æ—Ç–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç —Ç–æ–≥–æ, —á—Ç–æ —è –≥–æ–≤–æ—Ä—é, –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ —Å—Ç–∏–ª–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ Chick-Fil-A. –í—ã –¥–∞–µ—Ç–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤!"
            },
            {
              "content": "={{ $json.data.text }}"
            }
          ]
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "9c6c536d-acae-4549-ad99-7d73cf459c71",
      "name": "Extract Email",
      "type": "n8n-nodes-base.code",
      "position": [
        -940,
        280
      ],
      "parameters": {
        "jsCode": "const from = $input.first().json.from;\n\nconst match = from.match(/<([^>]+)>/);\nconst email = match ? match[1] : null;\n\nreturn [{ email }];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "d64efd1c-f977-4451-94fc-7cd559683a14",
      "name": "Ask for Response",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -200,
        300
      ],
      "webhookId": "63671f5d-7478-4a12-b034-ca783d537919",
      "parameters": {
        "chatId": "YOUR_CHAT_ID",
        "message": "=Email from {{ $json.email.replace(/[_*[\\]()~`>#+-=|{}.!]/g, '\\\\$&') }}\n\n{{ $json.text.replace(/[_*[\\]()~`>#+-=|{}.!]/g, '\\\\$&') }}",
        "options": {
          "appendAttribution": false
        },
        "operation": "sendAndWait",
        "responseType": "freeText"
      },
      "typeVersion": 1.2
    },
    {
      "id": "3f4bc908-c160-4188-b379-e932b5506674",
      "name": "If Respond",
      "type": "n8n-nodes-base.if",
      "position": [
        40,
        300
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "f08ff1ce-2ecc-436d-9edb-daa7829145a1",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              },
              "leftValue": "={{ $json.data.text }}",
              "rightValue": "\"\""
            },
            {
              "id": "410531e3-b90d-4056-bcd8-46ece6adf675",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              },
              "leftValue": "={{ $json.data.text }}",
              "rightValue": ""
            },
            {
              "id": "dd88ac54-ff03-429e-932d-6bebbf387a93",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              },
              "leftValue": "={{ $json.data.text }}",
              "rightValue": " "
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "906dc2e6-df99-4fe6-a35d-e2444b60b165",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -260,
        120
      ],
      "parameters": {
        "color": 5,
        "content": "–≠—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –∏ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –æ—Ç–≤–µ—Ç–∞"
      },
      "typeVersion": 1
    },
    {
      "id": "6658a91d-ccdb-4ef0-b672-a01f3beb2325",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        260,
        100
      ],
      "parameters": {
        "color": 5,
        "content": "–ù–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π ID —á–∞—Ç–∞ –∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–æ—Ç–∞"
      },
      "typeVersion": 1
    },
    {
      "id": "399978fc-c851-45ea-a666-6fd6533295b2",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        780,
        740
      ],
      "parameters": {
        "color": 5,
        "content": "–≠—Ç–æ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫"
      },
      "typeVersion": 1
    },
    {
      "id": "f20f34ec-4d8f-42ea-b785-1a9c2c2f0c4c",
      "name": "üöÄ SETUP GUIDE - START HERE",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1300,
        20
      ],
      "parameters": {
        "content": "–î–æ–±–∞–≤—å—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫—É, –µ—Å–ª–∏ –≤–∞—à —Å–ª—É—á–∞–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–∏–ø–µ—Ä—Å–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω"
      },
      "typeVersion": 1
    },
    {
      "id": "b1b6e37b-8d8b-4638-bbfd-c3d7a03598e5",
      "name": "üìß EMAIL SETUP",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1300,
        200
      ],
      "parameters": {
        "color": 3,
        "content": "–ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã –∏ —Ç–µ–º—É (–ø–æ –∂–µ–ª–∞–Ω–∏—é)"
      },
      "typeVersion": 1
    },
    {
      "id": "284470f1-c4bd-4b55-9b74-39879c75121c",
      "name": "üí¨ TELEGRAM SETUP",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -260,
        -240
      ],
      "parameters": {
        "color": 4,
        "height": 340,
        "content": "üìã –°–ü–ò–°–û–ö –ü–†–û–í–ï–†–û–ö:"
      },
      "typeVersion": 1
    },
    {
      "id": "5cc3a026-7ed7-4b1d-8d39-34518fc08d72",
      "name": "ü§ñ OPENAI SETUP",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        260,
        -320
      ],
      "parameters": {
        "color": 6,
        "height": 400,
        "content": "‚úÖ 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ IMAP –¥–ª—è —á—Ç–µ–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã"
      },
      "typeVersion": 1
    },
    {
      "id": "cc4e9eb6-a683-46eb-947d-bcc23fdf0b5d",
      "name": "üîÑ WORKFLOW FLOW",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -500,
        540
      ],
      "parameters": {
        "color": 2,
        "height": 400,
        "content": "‚úÖ 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ SMTP –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã"
      },
      "typeVersion": 1
    },
    {
      "id": "13ac71b6-1b23-49d1-ae57-ba0dde82aa76",
      "name": "‚öôÔ∏è FINAL CONFIGURATION",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        780,
        20
      ],
      "parameters": {
        "color": 7,
        "height": 420,
        "content": "‚úÖ 3. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ Telegram –∏ –ø–æ–ª—É—á–∏—Ç–µ ID —á–∞—Ç–∞"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "82956e8f-af60-4f1e-871d-0dad735af10c",
  "connections": {
    "Merge": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          },
          {
            "node": "Ask for Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Send Chick-fil-A Style Reply",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Respond": {
      "main": [
        [
          {
            "node": "Chick-Fil-A Translator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Text": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Extract Email": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ask for Response": {
      "main": [
        [
          {
            "node": "If Respond",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email Received (IMAP)": {
      "main": [
        [
          {
            "node": "Extract Email",
            "type": "main",
            "index": 0
          },
          {
            "node": "Extract Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chick-Fil-A Translator": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}