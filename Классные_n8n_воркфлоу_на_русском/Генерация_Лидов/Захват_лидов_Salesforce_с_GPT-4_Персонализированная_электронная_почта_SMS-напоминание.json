{
  "meta": {
    "instanceId": "9a562c06a632241f66aadd52a495ad98e76b760ef5cfce9c319a4759c47cd94e",
    "templateCredsSetupCompleted": true
  },
  "nodes": [
    {
      "id": "ec1d0463-087c-41e4-a4c9-e1672c1bee61",
      "name": "Create Salesforce Lead",
      "type": "n8n-nodes-base.salesforce",
      "position": [
        -380,
        -200
      ],
      "parameters": {
        "company": "=Web Lead {{ $json[\"Last Name\"] }}",
        "lastname": "={{ $json[\"Last Name\"] }}",
        "additionalFields": {
          "email": "={{ $json.Email }}",
          "firstname": "={{ $json[\"First Name\"] }}",
          "description": "={{ $json[\"Tell Us About Yourself (Description)\"] }}",
          "mobilePhone": "={{ $json[\"Phone (SMS)\"] }}"
        }
      },
      "credentials": {
        "salesforceOAuth2Api": {
          "id": "XhjgRQcYQYRIgOfD",
          "name": "Salesforce account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "3595d4f3-b3c3-4aa7-ba99-398ff7ab6fad",
      "name": "On form submission",
      "type": "n8n-nodes-base.formTrigger",
      "position": [
        -580,
        -200
      ],
      "webhookId": "aa0154af-fba9-48fb-9d2e-60d5b90e9338",
      "parameters": {
        "options": {
          "buttonLabel": "Submit"
        },
        "formTitle": "Contact Us",
        "formFields": {
          "values": [
            {
              "fieldLabel": "First Name",
              "requiredField": true
            },
            {
              "fieldLabel": "Last Name",
              "requiredField": true
            },
            {
              "fieldType": "email",
              "fieldLabel": "Email"
            },
            {
              "fieldLabel": "Phone (SMS)"
            },
            {
              "fieldType": "textarea",
              "fieldLabel": "Tell Us About Yourself (Description)"
            },
            {
              "fieldType": "dropdown",
              "fieldLabel": "Contact Preference:",
              "fieldOptions": {
                "values": [
                  {
                    "option": "Email"
                  },
                  {
                    "option": "Phone"
                  }
                ]
              },
              "requiredField": true
            },
            {}
          ]
        },
        "formDescription": "We'll get back to you soon"
      },
      "typeVersion": 2.2
    },
    {
      "id": "4349f4a7-98a1-4805-a7b1-fcc475274eea",
      "name": "OpenAI",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        -160,
        -200
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1",
          "cachedResultName": "GPT-4.1"
        },
        "options": {},
        "messages": {
          "values": [
            {
              "content": "=Создайте персонализированное приветственное сообщение для этого лида:"
            },
            {
              "role": "system",
              "content": "{{ JSON.stringify($('On form submission').item.json)}}"
            }
          ]
        }
      },
      "credentials": {
        "openAiApi": {
          "id": "ciKVFfcmd36noEnL",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1.8
    },
    {
      "id": "cac8625a-bd57-48b1-b98f-70daa4561c7c",
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "position": [
        200,
        -200
      ],
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "72c22b5b-16f6-424f-b3eb-e93da457e797",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "leftValue": "={{ $('On form submission').item.json[\"Contact Preference:\"] }}",
                    "rightValue": "Phone (SMS)"
                  }
                ]
              }
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "8d42ed48-0064-4a5f-b924-a7968a91c919",
                    "operator": {
                      "name": "filter.operator.equals",
                      "type": "string",
                      "operation": "equals"
                    },
                    "leftValue": "={{ $('On form submission').item.json[\"Contact Preference:\"] }}",
                    "rightValue": "Email"
                  }
                ]
              }
            }
          ]
        },
        "options": {}
      },
      "typeVersion": 3.2
    },
    {
      "id": "05b99b9d-a6ce-44a1-9269-508b7afce052",
      "name": "Send SMS",
      "type": "n8n-nodes-base.twilio",
      "notes": "Send SMS using Twilio",
      "position": [
        520,
        -300
      ],
      "parameters": {
        "to": "={{ $('On form submission').item.json[\"Phone (SMS)\"] }}",
        "from": "phoneNumber",
        "message": "={{ $('OpenAI').item.json.message.content }}",
        "options": {}
      },
      "credentials": {
        "twilioApi": {
          "id": "vM2JERicK76paC8V",
          "name": "Twilio account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "5d392311-853e-4e97-a436-874cc891bc6b",
      "name": "Send Email",
      "type": "n8n-nodes-base.emailSend",
      "position": [
        520,
        -80
      ],
      "webhookId": "653bd18e-774f-45aa-b28f-858e1a2bba32",
      "parameters": {
        "text": "={{ $('OpenAI').item.json.message.content }}",
        "options": {},
        "subject": "=Welcome {{ $('On form submission').item.json[\"First Name\"] }}",
        "toEmail": "={{ $('On form submission').item.json.Email }}",
        "fromEmail": "emailPlaceholder",
        "emailFormat": "text"
      },
      "credentials": {
        "smtp": {
          "id": "JNtQ5FosqXaLKi5O",
          "name": "SMTP account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "10d1bb22-1c6e-4762-937a-f4d1cbba7259",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -960,
        -480
      ],
      "parameters": {
        "width": 320,
        "height": 460,
        "content": "Настройте сообщение в соответствии с их интересом к бронированию создания формы n8n. Сделайте его теплым и полезным."
      },
      "typeVersion": 1
    }
  ],
  "pinData": {
    "On form submission": [
      {
        "Email": "alex.kim@example.com",
        "formMode": "live",
        "Last Name": "Kim",
        "First Name": "Alex",
        "Phone (SMS)": "1234567890",
        "submittedAt": "2025-07-18T10:00:00.000-04:00",
        "Contact Preference:": "Phone (SMS)",
        "Tell Us About Yourself (Description)": "I'm looking for a packaged software developer solution to build a custom CRM integration with n8n and Salesforce. Need something scalable for my startup."
      }
    ]
  },
  "connections": {
    "OpenAI": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Send SMS",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On form submission": {
      "main": [
        [
          {
            "node": "Create Salesforce Lead",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Salesforce Lead": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}