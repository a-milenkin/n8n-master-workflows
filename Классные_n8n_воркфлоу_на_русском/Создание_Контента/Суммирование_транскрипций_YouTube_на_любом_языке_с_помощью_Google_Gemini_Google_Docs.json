{
  "id": "e9QKXG6OxvBeE8MA",
  "meta": {
    "instanceId": "e634e668fe1fc93a75c4f2a7fc0dad807ca318b79654157eadb9578496acbc76",
    "templateCredsSetupCompleted": true
  },
  "name": "**–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞ (–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ YouTube)**",
  "tags": [],
  "nodes": [
    {
      "id": "98d6c238-8ab3-4814-8b95-cc9e201e9e0a",
      "name": "On form submission",
      "type": "n8n-nodes-base.formTrigger",
      "position": [
        0,
        0
      ],
      "webhookId": "10986afd-5943-4e72-9078-074e5191d7ac",
      "parameters": {
        "options": {},
        "formTitle": "summarize youtube videos from transcript for social media",
        "formFields": {
          "values": [
            {
              "fieldLabel": "videoUrl",
              "placeholder": "full video url",
              "requiredField": true
            },
            {
              "fieldLabel": "language",
              "placeholder": "English",
              "requiredField": true
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "d9076f8d-d9cd-47da-832c-2ed605675779",
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "position": [
        2540,
        460
      ],
      "parameters": {
        "options": {},
        "modelName": "models/gemini-2.0-flash"
      },
      "credentials": {
        "googlePalmApi": {
          "id": "O7BVBUVX5NSai6UC",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "2f2e8e76-6666-441a-854f-0d108a8f26d1",
      "name": "Google Docs",
      "type": "n8n-nodes-base.googleDocs",
      "position": [
        3460,
        -140
      ],
      "parameters": {
        "actionsUi": {
          "actionFields": [
            {
              "text": "={{ $json.summary }}",
              "action": "insert"
            }
          ]
        },
        "operation": "update",
        "documentURL": "",
        "authentication": "serviceAccount"
      },
      "credentials": {
        "googleApi": {
          "id": "myMHSWYgGOTcSwsg",
          "name": "Google Sheets account 3"
        }
      },
      "typeVersion": 2
    },
    {
      "id": "ab9dd3f4-f2aa-4d9f-aef7-72420a1e53f8",
      "name": "Mapper",
      "type": "n8n-nodes-base.set",
      "position": [
        420,
        0
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "a2486ac7-c29c-419e-9cfc-753701723510",
              "name": "videoUrl",
              "type": "string",
              "value": "={{ $json.videoUrl }}"
            },
            {
              "id": "8032743b-0266-488b-83f3-d0a42f35c1e0",
              "name": "language",
              "type": "string",
              "value": "={{ $json.language }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "ca6d25dd-0950-4ef2-9b2d-2f105d72fb35",
      "name": "Formator",
      "type": "n8n-nodes-base.code",
      "position": [
        1580,
        20
      ],
      "parameters": {
        "jsCode": "const rawArray = $input.first().json.data;\n\nconsole.log(\"Raw Array Data:\", rawArray); // Log the raw input data\n\n// Step 1: Parse the outer JSON to access the inner data\nlet parsedData;\ntry {\n  parsedData = JSON.parse(rawArray);\n  console.log(\"Parsed Data:\", parsedData); // Log the parsed data\n} catch (e) {\n  console.log(\"Error Parsing Outer Data:\", e);\n  return [{\n    json: {\n      chatInput: \"Failed to parse outer JSON data.\"\n    }\n  }];\n}\n\n// Step 2: Extract the actual transcript data from the 'data' field\nconst innerData = parsedData.data;\n\n// Step 3: Decode Unicode characters in the string\nconst decodedData = decodeURIComponent(innerData.replace(/\\\\u([0-9A-Fa-f]{4})/g, (match, p1) => {\n  return String.fromCharCode(parseInt(p1, 16));\n}));\n\nconsole.log(\"Decoded Data:\", decodedData); // Log the decoded data\n\n// Step 4: Check if the decoded data is a valid transcript\nif (!decodedData || decodedData.trim() === \"\") {\n  console.log(\"Invalid or empty transcript data.\");\n  return [{\n    json: {\n      chatInput: \"No valid transcript found.\"\n    }\n  }];\n}\n\n// Step 5: Return the final transcript text\nreturn [{\n  json: {\n    chatInput: decodedData\n  }\n}];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "7cf36479-c6a8-4763-b691-72d5c03a60f8",
      "name": "Optimizer",
      "type": "n8n-nodes-base.code",
      "position": [
        2860,
        -80
      ],
      "parameters": {
        "jsCode": "const inputText = $input.first().json.output;\n\nfunction getFieldValue(text, field) {\n  // Updated to stop at \"---\" or end of string, instead of a non-whitespace line\n  const regex = new RegExp(`${field}:\\\\s*([\\\\s\\\\S]*?)(?=\\\\n---|$)`, 'i');\n  const match = text.match(regex);\n  return match ? match[1].trim() : '';\n}\n\nconst summary = getFieldValue(inputText, 'üé¨ \\\\*\\\\*Summary\\\\*\\\\*');\n\nreturn [{\n  json: {\n    summary\n  }\n}];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "ac71fe03-898c-4cf3-9c98-f8b8f9e81346",
      "name": "AI Agent1",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2300,
        -80
      ],
      "parameters": {
        "options": {
          "systemMessage": "=You are a helpful assistant that summarizes YouTube video transcripts. Given a full transcript in {{ $('Mapper').item.json.language }}, summarize the main points, topics, and tone of the video in a concise and natural manner. The summary should be provided in the same language as the transcript. Format your response like this:\n\n---\nüé¨ **Summary**:  \n- [Main idea 1]  \n- [Main idea 2]  \n- [Optional tone, style, or genre]  \n---\n "
        }
      },
      "typeVersion": 1.7
    },
    {
      "id": "16681c25-5398-48f5-abf6-a02d7d4be8f2",
      "name": "YouTube Transcript AI",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        880,
        40
      ],
      "parameters": {
        "url": "https://youtube-transcriptor-pro.p.rapidapi.com/yt/index.php",
        "method": "POST",
        "options": {},
        "sendBody": true,
        "contentType": "multipart-form-data",
        "sendHeaders": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "=videoUrl",
              "value": "={{ $json.videoUrl }}"
            }
          ]
        },
        "headerParameters": {
          "parameters": [
            {
              "name": "x-rapidapi-host",
              "value": "youtube-transcriptor-pro.p.rapidapi.com"
            },
            {
              "name": "x-rapidapi-key"
            }
          ]
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "3de6995f-d44e-41fe-8cee-ef38e442023f",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -980,
        -680
      ],
      "parameters": {
        "width": 700,
        "height": 1060,
        "content": "# **–†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤ YouTube**"
      },
      "typeVersion": 1
    },
    {
      "id": "4904624a-f8b2-49d4-8a57-51b35b9e4e0c",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -180,
        -280
      ],
      "parameters": {
        "width": 380,
        "height": 440,
        "content": "–≠—Ç–æ—Ç —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å n8n –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤ –≤–∏–¥–µ–æ YouTube. –û–Ω –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç –≤–∏–¥–µ–æ, —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –µ–≥–æ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –Ω–∞ –Ω—É–∂–Ω–æ–º —è–∑—ã–∫–µ, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ Google –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞."
      },
      "typeVersion": 1
    },
    {
      "id": "be467ebe-553d-4b95-a56b-7ccf5a717b76",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        260,
        -280
      ],
      "parameters": {
        "width": 360,
        "height": 440,
        "content": "---"
      },
      "typeVersion": 1
    },
    {
      "id": "9e3ce6b1-e419-47e7-9e1b-d21789b384eb",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        640,
        -280
      ],
      "parameters": {
        "width": 600,
        "height": 440,
        "content": "### **–≠—Ç–∞–ø—ã —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞:**"
      },
      "typeVersion": 1
    },
    {
      "id": "a3fb823e-9eb9-447b-b725-2f471294a64a",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1320,
        -260
      ],
      "parameters": {
        "width": 620,
        "height": 400,
        "content": "**–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã (–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã)**"
      },
      "typeVersion": 1
    },
    {
      "id": "a1f79939-cd91-4076-8bfe-7c7e40c49f3f",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2240,
        -580
      ],
      "parameters": {
        "width": 400,
        "height": 720,
        "content": "- –°–±–æ—Ä `videoUrl` (—Å—Å—ã–ª–∫–∞ –Ω–∞ YouTube) –∏ `language` (–∂–µ–ª–∞–µ–º—ã–π —è–∑—ã–∫ —Ä–µ–∑—é–º–µ)."
      },
      "typeVersion": 1
    },
    {
      "id": "ac2d887f-2371-4bf1-a054-43df1bd0c090",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2700,
        -580
      ],
      "parameters": {
        "width": 360,
        "height": 700,
        "content": "**–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç–µ–ª—å)**"
      },
      "typeVersion": 1
    },
    {
      "id": "cca97d98-4d02-4298-b053-7945ee149794",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3260,
        -460
      ],
      "parameters": {
        "width": 560,
        "height": 480,
        "content": "- –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º (`videoUrl` –∏ `language`)."
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "fff226c0-4d72-46bc-93f5-4b284a89dee0",
  "connections": {
    "Mapper": {
      "main": [
        [
          {
            "node": "YouTube Transcript AI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Formator": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Optimizer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Optimizer": {
      "main": [
        [
          {
            "node": "Google Docs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On form submission": {
      "main": [
        [
          {
            "node": "Mapper",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "YouTube Transcript AI": {
      "main": [
        [
          {
            "node": "Formator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  }
}