{
  "id": "tqyzrnyfFxB3x8LO",
  "meta": {
    "instanceId": "3612a0c89f35a354ddd1216385240db51b4635fde7cae2a0d5004be915b832f3",
    "templateCredsSetupCompleted": true
  },
  "name": "*   **–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç:**",
  "tags": [],
  "nodes": [
    {
      "id": "dc30089e-2dea-4cba-ae74-f043240b5176",
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "position": [
        -40,
        1560
      ],
      "parameters": {
        "options": {},
        "modelName": "models/gemini-2.5-flash-preview-05-20"
      },
      "credentials": {
        "googlePalmApi": {
          "id": "c8jj7D6oz6RJ81qp",
          "name": "Google Gemini Context7"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "27d02a47-659e-4b6a-8c5f-50253fc5be1c",
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        820,
        1620
      ],
      "parameters": {
        "sessionKey": "={{ $execution.id }}",
        "sessionIdType": "customKey"
      },
      "typeVersion": 1.3
    },
    {
      "id": "b791c4dd-bdc8-4d38-a301-ababb9ff129f",
      "name": "brave_web_search",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "position": [
        1160,
        1300
      ],
      "parameters": {
        "toolName": "brave_web_search",
        "operation": "executeTool",
        "connectionType": "http",
        "toolParameters": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Tool_Parameters', `Generate a JSON object with the parameters for the 'brave_web_search' tool.\nThe tool expects a JSON object with the following keys:\n- \"query\": (string, **required**) The search terms designed to find multiple examples of a business type in a given area. Examples: \"list of crane hire companies in Newcastle NSW\", \"artisan bakeries Sydney CBD reviews\", \"marketing agencies California specializing in tech startups\".\n- \"count\": (number, optional) Number of results. For prospect discovery, a higher count (e.g., 10-20) might be useful to cast a wider net.\n- \"offset\": (number, optional) For pagination if analyzing multiple pages of results.\n\nExample:\n{\"query\": \"top rated plumbing services in Bristol UK\", \"count\": 15}`, 'json') }}",
        "descriptionType": "manual",
        "toolDescription": "Performs a general web search using Brave Search. Primarily used to find lists, directories, articles, or multiple mentions of businesses matching a specified type and location. The goal is to identify several potential prospect company names and their websites, not just one official site. Effective for initial broad sweeps to gather candidate businesses. Parameters: 'query' (required string), 'count' (optional number, max 20), 'offset' (optional number)."
      },
      "credentials": {
        "mcpClientHttpApi": {
          "id": "izP58157WoLmqx5y",
          "name": "smithery brave search"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "d33f89c7-ed40-427e-9f2c-b699194e860e",
      "name": "brave_local_search",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "position": [
        1720,
        1300
      ],
      "parameters": {
        "toolName": "brave_local_search",
        "operation": "executeTool",
        "connectionType": "http",
        "toolParameters": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Tool_Parameters', `Generate a JSON object with the parameters for the 'brave_local_search' tool.\nThe tool expects a JSON object with the following keys:\n- \"query\": (string, **required**) The search terms, typically a specific business name and its suspected city/area, to get a quick local listing check. Example: \"ABC Cranes Newcastle\", \"The Corner Bakery Springfield\".\n- \"count\": (number, optional) Usually 1 or a small number (e.g., 3) is sufficient, as you're checking a specific entity.\n\nExample:\n{\"query\": \"Summit Logistics, Dallas TX\", \"count\": 1}`, 'json') }}",
        "descriptionType": "manual",
        "toolDescription": "Searches for local business listings using Brave Local Search. In prospect discovery, this tool can be used sparingly to quickly verify if a business name found through broader searches has a local presence or to find a website URL if it's not immediately apparent from web search results. Not the primary tool for initial discovery of types, but useful for quick validation of individual potential prospects from a list. Parameters: 'query' (required string), 'count' (optional number, usually 1-3 for this purpose)."
      },
      "credentials": {
        "mcpClientHttpApi": {
          "id": "izP58157WoLmqx5y",
          "name": "smithery brave search"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "d2cd00e1-bb22-4a6d-a7c5-bcf299883396",
      "name": "jina_ai_web_page_scraper",
      "type": "n8n-nodes-base.jinaAiTool",
      "position": [
        2880,
        1300
      ],
      "parameters": {
        "url": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('URL', `Provide the full URL of a potential prospect's homepage or 'About Us' page. Use this only if you need to quickly verify from the website's text if the business matches the desired type before finalizing it as a prospect. Example: 'https://potentialprospect.com/about'.`, 'string') }}",
        "options": {
          "outputFormat": "markdown",
          "enableImageCaptioning": true
        },
        "requestOptions": {},
        "descriptionType": "manual",
        "toolDescription": "Extracts main textual content from a given web page URL. In prospect discovery, use this very selectively and sparingly. If a promising business website is found but it's unclear if they are the correct business type, a quick scrape of their homepage or 'About Us' page can help confirm relevance before adding them to the prospect list. Not for deep information extraction at this stage. Parameter: 'url' (required string). Critical: Use for 1-2 URLs max for quick validation if needed, due to time limits."
      },
      "credentials": {
        "jinaAiApi": {
          "id": "Ds8w0d9HhKCi6twc",
          "name": "Jina AI account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "27045509-9f22-4fd8-a753-5d5e2109caa7",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        680,
        -940
      ],
      "parameters": {
        "color": 7,
        "width": 940,
        "height": 460,
        "content": "## üìû –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ MCP (–¥–ª—è —Å–ª—É–∂–±—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤)"
      },
      "typeVersion": 1
    },
    {
      "id": "4cc52e11-b88f-44ec-8411-4e6f8cdb725c",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -860,
        -420
      ],
      "parameters": {
        "color": 4,
        "width": 840,
        "height": 420,
        "content": "–í–Ω–µ—à–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —ç—Ç–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–∫–ª–∏–µ–Ω—Ç–æ–≤."
      },
      "typeVersion": 1
    },
    {
      "id": "e69f1690-e3f8-43a4-b258-a562db2d4338",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -860,
        60
      ],
      "parameters": {
        "color": 4,
        "width": 840,
        "height": 320,
        "content": "**–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Roo Code/Cline):**"
      },
      "typeVersion": 1
    },
    {
      "id": "cebaa441-7072-42f4-abb6-52dff61d38ae",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        680,
        -460
      ],
      "parameters": {
        "color": 7,
        "width": 940,
        "height": 400,
        "content": "\"prospect-discovery\": {"
      },
      "typeVersion": 1
    },
    {
      "id": "44491f1b-4042-45b3-9fb7-87a96212d2c2",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1680,
        -1240
      ],
      "parameters": {
        "color": 3,
        "width": 740,
        "height": 280,
        "content": "\"url\": \"https://SERVER/mcp/PATHTOYOURMCP/sse\","
      },
      "typeVersion": 1
    },
    {
      "id": "4805790c-b4e7-4f37-949a-2d9a62bce598",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2480,
        -80
      ],
      "parameters": {
        "color": 2,
        "width": 740,
        "height": 560,
        "content": "\"alwaysAllow\": ["
      },
      "typeVersion": 1
    },
    {
      "id": "249f9bfb-b92f-4bf5-ad59-300271da9bff",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -740,
        720
      ],
      "parameters": {
        "color": 4,
        "width": 640,
        "height": 520,
        "content": "\"discover_prospect\""
      },
      "typeVersion": 1
    },
    {
      "id": "89ff4b9f-d13a-4ec4-af43-77f56fd2de03",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        20,
        620
      ],
      "parameters": {
        "color": 4,
        "width": 740,
        "height": 620,
        "content": "]"
      },
      "typeVersion": 1
    },
    {
      "id": "b73ca6ea-094f-487f-ab64-4a9c08d8d6d5",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        260,
        1660
      ],
      "parameters": {
        "color": 6,
        "width": 620,
        "height": 340,
        "content": "}"
      },
      "typeVersion": 1
    },
    {
      "id": "923fa510-9f62-4295-a604-72d02406d01a",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        720
      ],
      "parameters": {
        "color": 5,
        "width": 460,
        "height": 620,
        "content": "*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: tool_name –∑–¥–µ—Å—å (prospect-discovery) ‚Äî —ç—Ç–æ —Ç–æ, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –≤—Å—é —ç—Ç—É —Å–ª—É–∂–±—É MCP. alwaysAllow –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ–º—É —ç—Ç–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.*"
      },
      "typeVersion": 1
    },
    {
      "id": "69d2a0c8-6535-424e-8663-7d99e225d441",
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1540,
        720
      ],
      "parameters": {
        "color": 5,
        "width": 460,
        "height": 620,
        "content": "## üì° –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ_–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö_–∫–ª–∏–µ–Ω—Ç–æ–≤ (–¢—Ä–∏–≥–≥–µ—Ä —Å–µ—Ä–≤–µ—Ä–∞ MCP - –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞)"
      },
      "typeVersion": 1
    },
    {
      "id": "376c605e-7453-43b4-8d86-ebc701165e0a",
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2120,
        720
      ],
      "parameters": {
        "color": 5,
        "width": 460,
        "height": 620,
        "content": "üö™ **–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤**"
      },
      "typeVersion": 1
    },
    {
      "id": "38df04af-6a16-48b9-b028-3025c74131f5",
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2700,
        720
      ],
      "parameters": {
        "color": 5,
        "width": 460,
        "height": 620,
        "content": "*   **–¶–µ–ª—å:** –ï—Å–ª–∏ —ç—Ç–æ—Ç —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ –ø—Ä—è–º–æ–π —Å–µ—Ä–≤–∏—Å MCP, —ç—Ç–æ—Ç —É–∑–µ–ª –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥—Ä—É–≥–∏—Ö —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ n8n, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π), —Å—Ç—Ä–µ–º—è—â–∏—Ö—Å—è –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –±–∏–∑–Ω–µ—Å-–∫–ª–∏–µ–Ω—Ç–æ–≤."
      },
      "typeVersion": 1
    },
    {
      "id": "6c8a16f5-cb1d-46f3-8a75-688914e3a6c5",
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1680,
        -900
      ],
      "parameters": {
        "color": 2,
        "width": 740,
        "height": 500,
        "content": "*   **–§—É–Ω–∫—Ü–∏—è:** –°–ª—É—à–∞–µ—Ç HTTP POST –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º MCP (Multi-Capability Peer)."
      },
      "typeVersion": 1
    },
    {
      "id": "c8cd4af9-911a-4175-ae49-98b27c1f1558",
      "name": "Sticky Note14",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1680,
        -360
      ],
      "parameters": {
        "color": 2,
        "width": 740,
        "height": 460,
        "content": "*   **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:** –ë—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `discover_prospect` (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —É–∑–ª–æ–º —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞), –≤–Ω–µ—à–Ω–µ–º—É –≤—ã–∑—ã–≤–∞—é—â–µ–º—É."
      },
      "typeVersion": 1
    },
    {
      "id": "31a06a5a-c805-48c0-889a-e72a4192b341",
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -720,
        1600
      ],
      "parameters": {
        "color": 6,
        "width": 740,
        "height": 260,
        "content": "*   **–¢–∏–ø–∏—á–Ω—ã–π –≤–≤–æ–¥:** JSON –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞, —É–∫–∞–∑—ã–≤–∞—é—â–∞—è `tool_name: \"discover_prospect\"` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É) –∏ `tool_input`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π `business_type`, `location_query`, `desired_num_prospects` –∏ `additional_keywords`."
      },
      "typeVersion": 1
    },
    {
      "id": "d982e681-f48e-4020-9d6b-cf862f24ace7",
      "name": "Sticky Note16",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2480,
        -900
      ],
      "parameters": {
        "color": 2,
        "width": 740,
        "height": 360,
        "content": "*   **–¢–∏–ø–∏—á–Ω—ã–π –≤—ã–≤–æ–¥:** –ü–∞—Ä—Å–∏—Ç –≤—Ö–æ–¥—è—â–∏–π –∑–∞–ø—Ä–æ—Å –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç `tool_input` —É–∑–ª—É `discover_prospect` (—Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞), –∏–Ω–∏—Ü–∏–∏—Ä—É—è –ø—Ä–æ—Ü–µ—Å—Å –∞–≥–µ–Ω—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤."
      },
      "typeVersion": 1
    },
    {
      "id": "f23b12e0-a347-4b85-ae2c-17f50f2b2e98",
      "name": "Sticky Note17",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2480,
        -500
      ],
      "parameters": {
        "color": 2,
        "width": 740,
        "height": 400,
        "content": "*   **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ—Ç —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤—ã–∑–æ–≤–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–¥-—Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞–ø—Ä—è–º—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"60s Referral Planner\"), —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –µ–≥–æ –æ—Å–Ω–æ–≤–Ω—ã–º —Å–ª—É—á–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è."
      },
      "typeVersion": 1
    },
    {
      "id": "a7f54d15-946f-4712-94ca-97a360adc9bc",
      "name": "Sticky Note18",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3440,
        -1160
      ],
      "parameters": {
        "color": 7,
        "width": 860,
        "height": 1640,
        "content": "## ‚û°Ô∏è discover_prospect (–£–∑–µ–ª —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞)"
      },
      "typeVersion": 1
    },
    {
      "id": "71869bea-8ed4-4aa6-a8d3-6a19be1af7e8",
      "name": "prospect_discovery",
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "position": [
        -220,
        -80
      ],
      "webhookId": "5de5d0b6-7f58-47df-8d2c-4096f61212c8",
      "parameters": {
        "path": "5de5d0b6-7f58-47df-8d2c-4096f61212c8"
      },
      "typeVersion": 1
    },
    {
      "id": "617b4a64-691a-4850-9b2c-f38c9580869c",
      "name": "discover_prospect",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "position": [
        -60,
        320
      ],
      "parameters": {
        "workflowId": {
          "__rl": true,
          "mode": "list",
          "value": "tqyzrnyfFxB3x8LO",
          "cachedResultName": "Prospect Discovery"
        },
        "description": "üìû **–í—ã–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏–∫—É –∞–≥–µ–Ω—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤**",
        "workflowInputs": {
          "value": {
            "business_type": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('business_type', `Specify the category or type of business to search for. This should be derived from the user's 'Ideal Referral' input when it describes a general business category. Examples: \"crane hire company\", \"artisan bakery\", \"SaaS provider for HR\", \"boutique marketing agency\".`, 'string') }}",
            "location_query": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('location_query', `Provide a description of the target geographical area for the prospect search. This should be inferred from the user's own business location (e.g., if the user is in Newcastle, search for prospects in Newcastle or surrounding areas, unless otherwise specified). Examples: \"Newcastle NSW Australia\", \"downtown San Francisco\", \"Midlands UK\", \"businesses operating primarily online globally\".`, 'string') }}",
            "additional_keywords": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('additional_keywords', `(Optional) Include any other relevant terms or specializations mentioned by the user for their ideal referral, or that you infer might refine the search for the business type. Examples: \"specializing in commercial projects\", \"eco-friendly products\", \"B2B focus\", \"serves small businesses\". Leave empty if no specific refinements are needed beyond type and location.`, 'string') }}",
            "desired_num_prospects": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('desired_num_prospects', `Set the target number of unique prospect examples to find. A small number (e.g., 2 or 3) is usually sufficient at this stage, as the goal is to get a few good examples that can then be used to craft a more targeted referral ask or for further specific research.`, 'string') }}"
          },
          "schema": [
            {
              "id": "business_type",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "business_type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "location_query",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "location_query",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "desired_num_prospects",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "desired_num_prospects",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "additional_keywords",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "additional_keywords",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "2b29393a-1ffe-494c-9ab3-803da13efbc9",
      "name": "prospect_discovery_agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        240,
        1180
      ],
      "parameters": {
        "text": "=Based on the provided business type, location, desired number of prospects, and any additional keywords, identify a list of potential business prospects including their names and website URLs.\n\nbusiness_type: {{ $('prospect_discovery_workflow').item.json.business_type || 'Not specified' }}\nlocation_query: {{ $('prospect_discovery_workflow').item.json.location_query || 'Not specified' }}\ndesired_num_prospects: {{ Number($('prospect_discovery_workflow').item.json.desired_num_prospects) || 1 }}\nadditional_keywords: {{ $('prospect_discovery_workflow').item.json.additional_keywords || 'None' }}",
        "options": {
          "systemMessage": "=You are an AI Prospecting Specialist. Your mission is to identify a specified number of potential business prospects. For EACH prospect you identify, you must gather key details including their official name, website URL, a brief description of their services, a key contact person/owner (if discoverable), and a business phone number (if discoverable). This process is guided by the `business_type`, `location_query`, `desired_num_prospects`, and optional `additional_keywords` you receive. Your final output must be a structured JSON array of these detailed prospect profiles.\n\n**Inputs You Will Receive:**\n*   `business_type`: (string) The category or type of business to search for (e.g., \"crane hire company\", \"artisan bakery\").\n*   `location_query`: (string) A description of the target geographical area (e.g., \"Newcastle NSW Australia\", \"downtown San Francisco\"). This is crucial.\n*   `desired_num_prospects`: (number) The target number of unique, well-profiled prospects.\n*   `additional_keywords`: (string, optional) Other terms to refine the search.\n\n**Your Operational Protocol:**\n\n**Phase 1: Initial Prospect Candidate Identification**\n1.  **Formulate Broad Search Queries:** Combine `business_type`, `location_query`, and `additional_keywords`. Examples: \"list of `[business_type]` in `[location_query]` `[additional_keywords]`\", \"top `[business_type]` `[location_query]`\".\n2.  **Use Search Tools for Candidate List:**\n    *   Primarily use `brave_web_search` (e.g., with `count: 10` or `15`) and/or `google_gemini_prospect_finder` for these broad queries.\n    *   **Goal:** From search result snippets and titles, extract a working list of potential company names and their website URLs. Aim for slightly more candidates than `desired_num_prospects` initially (e.g., if targeting 3, find 5-7).\n\n**Phase 2: Detailed Profiling of Selected Candidates**\nIterate through your initial list of candidates. For each candidate, attempt to build a detailed profile until you have successfully profiled up to `desired_num_prospects` businesses.\n\nFor each candidate business from Phase 1:\n1.  **Confirm Official Name & Primary Website URL:**\n    *   If not perfectly clear, use a targeted `brave_web_search` (e.g., `{\"query\": \"[Candidate Company Name from initial list] official website\"}`) or `brave_local_search` (e.g., `{\"query\": \"[Candidate Company Name from initial list] [location_query]\"}`).\n    *   If a clear official website cannot be confidently found, consider skipping this candidate for detailed profiling.\n\n2.  **Gather Key Business Details (once website is confirmed):**\n    *   **Website Content Analysis (`jina_ai_web_page_scraper`):**\n        *   **Tool Input:** `{\"url\": \"[Prospect's Confirmed Website URL]\"}`. Prioritize scraping 'About Us', 'Contact Us', or 'Services' pages if their URLs are identifiable or inferable. If not, scrape the homepage.\n        *   **Information to Extract:** A brief description of their services/business focus; contact phone numbers; general email addresses (like info@, sales@); names of owners, founders, or key management.\n        *   **Usage Note:** Be judicious. If a site is very large, focus on 1-2 key pages.\n    *   **Targeted Information Search (using `google_gemini_prospect_finder` or `brave_local_search`):**\n        *   **Tool Inputs:** Formulate precise queries.\n            *   `google_gemini_prospect_finder`: e.g., `{\"query\": \"owner of [Prospect Name]\"}` or `{\"query\": \"contact phone [Prospect Name] [location_query]\"}`. If a key person's name is found from scraping: `{\"query\": \"[Key Person Name] [Prospect Name] LinkedIn\"}`.\n            *   `brave_local_search`: e.g., `{\"query\": \"[Prospect Name] [location_query]\"}` (can yield listed phone, address).\n        *   **Goal:** Find/confirm phone numbers, identify contact persons, and verify service descriptions.\n\n3.  **Synthesize and Construct Profile for Current Prospect:**\n    *   Compile all verified information for the current prospect.\n    *   If essential details (e.g., a verifiable phone number or a clear description of services that matches the `business_type`) cannot be found after reasonable attempts, you may discard this candidate and move to the next from your initial list. Aim for quality profiles.\n\n**Phase 3: Final Output Generation**\n1.  **Format as JSON Array:** Your final output MUST be a JSON array containing one object for each successfully profiled prospect.\n    ```json\n    [\n      {\n        \"business_name\": \"Example Crane Hire Pty Ltd\",\n        \"website_url\": \"https://www.examplecrane.com.au\",\n        \"description\": \"Provides crane rental and lifting services for construction projects in Newcastle.\",\n        \"key_contact_owner\": \"John Smith (Owner/Operator)\", // Or \"Contact: Operations Manager\", or \"N/A\" if not found\n        \"phone_number\": \"02-1234-5678\", // Or \"N/A\" if not found\n        \"contact_email\": \"info@examplecrane.com.au\", // Or \"N/A\" if not found\n        \"linkedin_profile\": \"https://linkedin.com/in/johnsmithcrane\" // Or \"N/A\" if not found\n      }\n      // ... up to desired_num_prospects objects\n    ]\n    ```\n2.  **Return ONLY the JSON Array:** No introductory text, no \"Here is the list:\", just the array itself.\n3.  **Empty Array for No Valid Results:** If no prospects can be adequately profiled up to `desired_num_prospects`, return an empty array: `[]`.\n\n**Critical: Tool Input Precision:**\n*   When preparing to call ANY tool (`brave_web_search`, `google_gemini_prospect_finder`, `brave_local_search`, `jina_ai_web_page_scraper`), the JSON input you generate for that tool MUST strictly match its expected schema.\n    *   `brave_web_search`: Expects `{\"query\": \"string\", \"count\": number (optional), \"offset\": number (optional)}`.\n    *   `google_gemini_prospect_finder`: Expects `{\"query\": \"string\", \"organization\": \"string (optional)\", \"restrictUrls\": \"string (optional)\"}`.\n    *   `brave_local_search`: Expects `{\"query\": \"string\", \"count\": number (optional)}`.\n    *   `jina_ai_web_page_scraper`: Expects `{\"url\": \"string\"}`.\n*   **Always ensure all required parameters for a tool are present in your generated input, and that data types are correct (strings are quoted, numbers are not).** Mistakes here will cause schema errors.\n\n**Priorities:**\n*   **Actionable Contact Details:** For each profiled prospect, strive to find a business phone number. A key contact/owner is highly desirable.\n*   **Relevance:** Profiled businesses must genuinely match the `business_type` in the `location_query`.\n*   **Accuracy:** Verify information where possible. If a detail is uncertain or cannot be found, use \"N/A\" or a similar indicator in the output JSON."
        },
        "promptType": "define"
      },
      "typeVersion": 2
    },
    {
      "id": "d54d6483-54bc-45b3-9a2b-05767176aa08",
      "name": "prospect_discovery_workflow",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "position": [
        -500,
        1180
      ],
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "business_type"
            },
            {
              "name": "location_query"
            },
            {
              "name": "desired_num_prospects"
            },
            {
              "name": "additional_keywords"
            }
          ]
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "4c2d5725-1e5b-4ca5-b030-6be6cb28638c",
      "name": "google_gemini_prospect_finder",
      "type": "n8n-nodes-gemini-search.geminiSearchToolTool",
      "position": [
        2300,
        1300
      ],
      "parameters": {
        "model": "gemini-2.5-flash-preview-05-20",
        "query": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Query', `Formulate a search query aimed at discovering multiple businesses of a certain type within a geographical area or industry. Examples: \"Find crane hire companies operating in Newcastle, Australia\", \"List software development agencies in London focusing on fintech\", \"What are some popular artisan bakeries in San Francisco's Mission District?\".`, 'string') }}",
        "options": {
          "extractSourceUrl": true
        },
        "organization": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Organization_Context', `(Optional) Provide an industry or general business type as context if not already clear in the main query. Example: 'logistics companies', 'eco-friendly retail'. Less about a specific business name here, more about the category.`, 'string') }}",
        "restrictUrls": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Restrict_Search_to_URLs', `(Optional and use sparingly for discovery) Provide a comma-separated list of specific website URLs ONLY if you are trying to find businesses listed on a known, relevant directory (e.g., 'yellowpages.com.au', 'clutch.co'). Generally, for broad discovery, leave blank.`, 'string') }}",
        "toolDescription": "Leverages Google's Gemini model for advanced, context-aware searching to identify potential business prospects. Use this to find lists of businesses by type and location, discover companies mentioned in relevant articles, or to perform more nuanced queries for business discovery when standard search isn't sufficient. Can help identify multiple potential leads rather than a single specific entity. Key Parameters: 'query' (string), 'organization' (can be used for industry context), 'restrictUrls' (rarely used for discovery unless searching specific directories)."
      },
      "credentials": {
        "geminiSearchApi": {
          "id": "grHOyabfaEb2A17I",
          "name": "Gemini Credentials account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "f5d70acc-c6f9-4ce9-85d0-35c3c6403725",
      "name": "Sticky Note19",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1940,
        -780
      ],
      "parameters": {
        "color": 7,
        "width": 940,
        "height": 1760,
        "content": "*   **–¶–µ–ª—å:** –≠—Ç–æ—Ç —É–∑–µ–ª –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ –º–æ—Å—Ç, —Ñ–æ—Ä–º–∞–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞—è –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É `prospect_discovery_agent`."
      },
      "typeVersion": 1
    }
  ],
  "active": true,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "fa334835-a924-4cd6-9835-73a02b7c3f02",
  "connections": {
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "prospect_discovery_agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "brave_web_search": {
      "ai_tool": [
        [
          {
            "node": "prospect_discovery_agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "discover_prospect": {
      "ai_tool": [
        [
          {
            "node": "prospect_discovery",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "brave_local_search": {
      "ai_tool": [
        [
          {
            "node": "prospect_discovery_agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "prospect_discovery_agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "jina_ai_web_page_scraper": {
      "ai_tool": [
        [
          {
            "node": "prospect_discovery_agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "prospect_discovery_workflow": {
      "main": [
        [
          {
            "node": "prospect_discovery_agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "google_gemini_prospect_finder": {
      "ai_tool": [
        [
          {
            "node": "prospect_discovery_agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  }
}