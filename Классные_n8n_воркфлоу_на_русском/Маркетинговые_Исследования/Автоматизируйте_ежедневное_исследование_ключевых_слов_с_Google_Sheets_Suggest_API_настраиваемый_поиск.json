{
  "meta": {
    "instanceId": "ba73835d772fb31a8c93dbcda773c1ef34e21227b9c152c1ee6fdf0eab995f28",
    "templateCredsSetupCompleted": true
  },
  "nodes": [
    {
      "id": "f0738de4-22b6-48eb-a037-727ecb52b682",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        260,
        600
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "556149ce-60ab-4188-9c12-06d5ce5846e7",
      "name": "Fetch Keyword List (Google Sheets)",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        500,
        600
      ],
      "parameters": {
        "options": {},
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/12GNwRDjdfyDvGbC3Vqiy7lIVdQJcPz3D42xpUOUVpbc/edit#gid=0",
          "cachedResultName": "Sheet1"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "12GNwRDjdfyDvGbC3Vqiy7lIVdQJcPz3D42xpUOUVpbc",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/12GNwRDjdfyDvGbC3Vqiy7lIVdQJcPz3D42xpUOUVpbc/edit?usp=drivesdk",
          "cachedResultName": "article by keyword"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "8SCk1D65lQur82YT",
          "name": "Google Sheets account 2"
        }
      },
      "typeVersion": 4.5
    },
    {
      "id": "3bc6997f-a6ba-4e23-8c3a-19f2eff35354",
      "name": "Select Keyword of the Day",
      "type": "n8n-nodes-base.code",
      "position": [
        740,
        600
      ],
      "parameters": {
        "jsCode": "const rows = items; // allrows from Google Sheet\n\n// Count the days since July 5, 2025\nconst startDate = new Date(\"2025-07-04\");\nconst today = new Date();\nconst dayDiff = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));\n\n// Calculate today's keyword index\nconst index = dayDiff % rows.length;\nconst selectedKeyword = rows[index].json.Title || rows[index].json.Keyword || \"Unknown\";\n\nreturn [\n  {\n    json: {\n      index,\n      keyword: selectedKeyword,\n      date: today.toISOString()\n    }\n  }\n];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "9458a3a7-a748-429b-8388-bfe9c6df111c",
      "name": "Set Selected Keyword",
      "type": "n8n-nodes-base.set",
      "position": [
        1000,
        600
      ],
      "parameters": {
        "values": {
          "string": [
            {
              "name": "seed_keyword",
              "value": "={{ $json.keyword }}"
            }
          ]
        },
        "options": {}
      },
      "typeVersion": 2
    },
    {
      "id": "bcf65001-8156-4c75-aebb-f58a7ea556e5",
      "name": "Fetch Autocomplete Suggestions (Google Suggest API)",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1260,
        600
      ],
      "parameters": {
        "url": "https://suggestqueries.google.com/complete/search",
        "options": {},
        "queryParametersUi": {
          "parameter": [
            {
              "name": "client",
              "value": "firefox"
            },
            {
              "name": "q",
              "value": "={{$json.keyword}}"
            }
          ]
        }
      },
      "typeVersion": 2
    },
    {
      "id": "16332f94-ad54-4c87-9a43-f4c9afd68a21",
      "name": "Extract Suggestion Keywords",
      "type": "n8n-nodes-base.function",
      "position": [
        520,
        840
      ],
      "parameters": {
        "functionCode": "if (Array.isArray($json) && Array.isArray($json[1])) {\n  const suggestions = $json[1];\n  return suggestions.map(k => ({ json: { keyword: k } }));\n} else {\n  throw new Error(\"Unexpected response format from Google Suggest API\");\n}"
      },
      "typeVersion": 1
    },
    {
      "id": "03299970-288c-461a-82e2-dd5216bb5beb",
      "name": "Search Keywords (Google Custom Search API)",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        780,
        840
      ],
      "parameters": {
        "url": "https://www.googleapis.com/customsearch/v1",
        "options": {},
        "sendQuery": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "queryParameters": {
          "parameters": [
            {
              "name": "q",
              "value": "={{ $json.keyword }}"
            }
          ]
        }
      },
      "credentials": {
        "httpBasicAuth": {
          "id": "OW11joKC65UsGle7",
          "name": "Unnamed credential 5"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "e8263f69-97e2-4d8a-aa8c-a30a9abfbf9a",
      "name": "Format Search Results",
      "type": "n8n-nodes-base.code",
      "position": [
        1040,
        840
      ],
      "parameters": {
        "jsCode": "const results = $json.items || [];\nreturn results.map(item => ({\n  json: {\n    title: item.title,\n    link: item.link,\n    snippet: item.snippet\n  }\n}));\n"
      },
      "typeVersion": 2
    },
    {
      "id": "e4d2fcf8-0c39-4c3b-a282-a998d76def16",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -700,
        -60
      ],
      "parameters": {
        "width": 720,
        "height": 1640,
        "content": "## üìí –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é Google Sheets, Suggest API –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞"
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Manual Trigger": {
      "main": [
        [
          {
            "node": "Fetch Keyword List (Google Sheets)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Selected Keyword": {
      "main": [
        [
          {
            "node": "Fetch Autocomplete Suggestions (Google Suggest API)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Select Keyword of the Day": {
      "main": [
        [
          {
            "node": "Set Selected Keyword",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Suggestion Keywords": {
      "main": [
        [
          {
            "node": "Search Keywords (Google Custom Search API)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Keyword List (Google Sheets)": {
      "main": [
        [
          {
            "node": "Select Keyword of the Day",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search Keywords (Google Custom Search API)": {
      "main": [
        [
          {
            "node": "Format Search Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Autocomplete Suggestions (Google Suggest API)": {
      "main": [
        [
          {
            "node": "Extract Suggestion Keywords",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}