{
  "id": "wgiPmy2oohNQNn16",
  "meta": {
    "instanceId": "2b5e4df2c8f09d3f1c6a9d5feed70e13566f992996d76546c93bb461a05174f7",
    "templateCredsSetupCompleted": true
  },
  "name": "- üß† –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π AI-–∞–Ω–∞–ª–∏–∑",
  "tags": [
    {
      "id": "o6bfS4keAgYWk91Y",
      "name": "Creator Hub",
      "createdAt": "2025-07-25T05:44:50.324Z",
      "updatedAt": "2025-07-25T05:44:50.324Z"
    }
  ],
  "nodes": [
    {
      "id": "b44a60d8-695f-464a-9b15-88523e31ef7c",
      "name": "Check robots.txt",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -1008,
        -784
      ],
      "parameters": {
        "url": "={{ $json.url.split('/').slice(0, 3).join('/') }}/robots.txt",
        "options": {
          "timeout": 10000,
          "redirect": {
            "redirect": {
              "maxRedirects": 3
            }
          }
        }
      },
      "typeVersion": 4
    },
    {
      "id": "3ef82f59-df49-4981-b44e-d7a56f4632f1",
      "name": "Scrape Website",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -1072,
        -512
      ],
      "parameters": {
        "url": "={{ $json.url }}",
        "options": {
          "timeout": 30000,
          "redirect": {
            "redirect": {
              "maxRedirects": 5
            }
          }
        }
      },
      "typeVersion": 4
    },
    {
      "id": "01e70bb5-803e-40d8-b99d-f15ad7b34127",
      "name": "validate-input",
      "type": "n8n-nodes-base.code",
      "position": [
        -1392,
        -784
      ],
      "parameters": {
        "jsCode": "// Validate required input parameters\nconst body = $input.first().json.body || $input.first().json.chatInput;\n\nif (!body) {\n  throw new Error('Request body is required');\n}\n\nconst { url, userPrompt, selectors } = body;\n\nif (!url) {\n  throw new Error('URL is required');\n}\n\n// Validate URL format using regex\nconst urlRegex = /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)$/;\nif (!urlRegex.test(url)) {\n  throw new Error('Invalid URL format. Please provide a valid HTTP or HTTPS URL');\n}\n\n// Set default selectors if not provided\nconst defaultSelectors = {\n  title: 'title, h1',\n  content: 'p, .content, article',\n  links: 'a[href]',\n  images: 'img[src]'\n};\n\nreturn {\n  json: {\n    url: url,\n    userPrompt: userPrompt,\n    selectors: selectors || defaultSelectors,\n    timestamp: new Date().toISOString()\n  }\n};"
      },
      "typeVersion": 2
    },
    {
      "id": "08a8fcc8-b947-4b29-8723-9466795bddb4",
      "name": "analyze-robots",
      "type": "n8n-nodes-base.code",
      "position": [
        -656,
        -784
      ],
      "parameters": {
        "jsCode": "// Analyze robots.txt content for scraping permissions\nconst robotsResponse = $input.first().json;\nconst originalData = $('validate-input').first().json;\n\nlet isAllowed = true;\nlet robotsInfo = 'No robots.txt found - proceeding with caution';\n\nif (robotsResponse && !robotsResponse.error) {\n  const robotsContent = robotsResponse.data || '';\n  robotsInfo = 'Robots.txt found and analyzed';\n  \n  // Simple robots.txt analysis\n  const lines = robotsContent.toLowerCase().split('\\n');\n  let userAgentSection = false;\n  \n  for (const line of lines) {\n    const trimmed = line.trim();\n    \n    if (trimmed.startsWith('user-agent:')) {\n      userAgentSection = trimmed.includes('*') || trimmed.includes('n8n');\n    }\n    \n    if (userAgentSection && trimmed.startsWith('disallow:')) {\n      const path = trimmed.replace('disallow:', '').trim();\n      if (path === '/' || (path && originalData.url.includes(path))) {\n        isAllowed = false;\n        break;\n      }\n    }\n  }\n}\n\nif (!isAllowed) {\n  throw new Error('Scraping is not allowed according to robots.txt');\n}\n\nreturn {\n  json: {\n    ...originalData,\n    robotsInfo: robotsInfo,\n    scrapingAllowed: isAllowed\n  }\n};"
      },
      "typeVersion": 2
    },
    {
      "id": "17cdd4ac-56bd-40c2-ae5a-056f9f490eeb",
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        -1760,
        -416
      ],
      "parameters": {
        "mode": "raw",
        "options": {},
        "jsonOutput": "={\n  \"body\": {\n      \"url\" : \"{{ $item(\"0\").$node[\"Webhook\"].json[\"body\"][\"blogUrl\"] || $item(\"0\").$node[\"Webhook\"].json[\"body\"][\"message\"]  }}\"\n  }\n  \n}\n"
      },
      "typeVersion": 3.4
    },
    {
      "id": "dbba32d9-8afd-4630-a3a1-48db8a6907a3",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "position": [
        -288,
        -784
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "d504a476-a1b0-4915-9144-da7c98bb899e",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              },
              "leftValue": "={{ $json.scrapingAllowed }}",
              "rightValue": ""
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "cff31487-4100-4fdc-bc09-a3af4906a346",
      "name": "Markdown",
      "type": "n8n-nodes-base.markdown",
      "position": [
        -784,
        -512
      ],
      "parameters": {
        "html": "={{ $json.data }}",
        "options": {
          "codeBlockStyle": "fence",
          "useLinkReferenceDefinitions": true
        }
      },
      "typeVersion": 1
    },
    {
      "id": "2adb559e-55fc-4f6f-aa51-d658f64d4e7e",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "position": [
        240,
        -560
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 1.4
    },
    {
      "id": "59c45ff1-13f9-4d61-86d2-e8b5d5039649",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "position": [
        -2048,
        -528
      ],
      "webhookId": "44af52f1-6a3c-439f-b1b6-90e37f2dec8b",
      "parameters": {
        "path": "44af52f1-6a3c-439f-b1b6-90e37f2dec8b",
        "options": {
          "allowedOrigins": "*"
        },
        "httpMethod": "POST",
        "responseMode": "responseNode"
      },
      "typeVersion": 2
    },
    {
      "id": "b41b2d39-84ca-4a99-835c-9e8292d6de26",
      "name": "Respond to Webhook1",
      "type": "n8n-nodes-base.respondToWebhook",
      "position": [
        -48,
        -960
      ],
      "parameters": {
        "options": {
          "responseCode": 500
        },
        "respondWith": "text",
        "responseBody": "The scrapping of the website is not allowed"
      },
      "typeVersion": 1.4
    },
    {
      "id": "9f332052-0bc9-4813-a72a-070436e50fa2",
      "name": "No Operation, do nothing",
      "type": "n8n-nodes-base.noOp",
      "position": [
        160,
        -960
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "595f8c17-6c58-4bc6-b45e-c30d1f5c929d",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2048,
        -1104
      ],
      "parameters": {
        "width": 368,
        "height": 320,
        "content": "## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã"
      },
      "typeVersion": 1
    },
    {
      "id": "6d39cf71-9e14-43c3-83cc-753244b00c7d",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1856,
        -640
      ],
      "parameters": {
        "width": 304,
        "height": 368,
        "content": "**–¢–∏–ø:** –í–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥ + AI-–∞–Ω–∞–ª–∏–∑"
      },
      "typeVersion": 1
    },
    {
      "id": "c96d740b-4e78-4406-a4b6-3d25ca55089c",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1536,
        -1104
      ],
      "parameters": {
        "width": 432,
        "height": 464,
        "content": "**–¢—Ä–∏–≥–≥–µ—Ä:** –í–µ–±—Ö—É–∫ (POST-–∑–∞–ø—Ä–æ—Å)"
      },
      "typeVersion": 1
    },
    {
      "id": "447e83a0-fac0-4786-b9a1-077028feb34f",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1088,
        -1104
      ],
      "parameters": {
        "width": 320,
        "height": 464,
        "content": "**–ü—Ä–æ—Ü–µ—Å—Å:** –ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ç–∏–∫–∏ ‚Üí –°–∫—Ä–∞–ø–∏–Ω–≥ ‚Üí –ê–Ω–∞–ª–∏–∑ ‚Üí –û—Ç–≤–µ—Ç"
      },
      "typeVersion": 1
    },
    {
      "id": "bcbd96bc-acf1-4713-b9da-4b69faf1e438",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -752,
        -1104
      ],
      "parameters": {
        "width": 304,
        "height": 464,
        "content": "**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** —Å–æ–±–ª—é–¥–µ–Ω–∏–µ robots.txt –≤—Å—Ç—Ä–æ–µ–Ω–æ"
      },
      "typeVersion": 1
    },
    {
      "id": "81f560a3-d160-4fbc-9906-266d86445a55",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1424,
        -576
      ],
      "parameters": {
        "width": 544,
        "height": 256,
        "content": "**–í—ã—Ö–æ–¥:** –í—Å–µ–æ–±—ä–µ–º–ª—é—â–∏–π –æ—Ç—á–µ—Ç –æ –±–ª–æ–≥–∞—Ö"
      },
      "typeVersion": 1
    },
    {
      "id": "ee07f73b-45e2-4343-b9e2-7643ec48344b",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -544,
        -576
      ],
      "parameters": {
        "width": 496,
        "height": 464,
        "content": "**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**"
      },
      "typeVersion": 1
    },
    {
      "id": "667ee6bb-9348-4543-8b8b-bcea0393851f",
      "name": "Code",
      "type": "n8n-nodes-base.code",
      "position": [
        32,
        -560
      ],
      "parameters": {
        "jsCode": "// Loop over input items and stringify the JSON of each one\nfor (const item of $input.all()) {\n  item.json.myStringifiedField = JSON.stringify(item.json.someObject);\n}\nreturn $input.all();"
      },
      "typeVersion": 2
    },
    {
      "id": "c0a2cb12-c39f-49ea-94e4-876a86b0aa3d",
      "name": "SEO Blog Analysis",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        -448,
        -224
      ],
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1",
          "cachedResultName": "GPT-4.1"
        },
        "options": {
          "topP": 0.6,
          "temperature": 0.1
        },
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —ç—Ç–∏—á–µ—Å–∫–æ–º—É —Å–∫—Ä–∞–ø–∏–Ω–≥—É"
            },
            {
              "content": "={{ $json.data }}"
            }
          ]
        },
        "jsonOutput": true
      },
      "credentials": {
        "openAiApi": {
          "id": "Q6k9lIWlKfszMOHE",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1.8
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "3e9c33d6-3e95-4a75-adc3-ffe4417f7a68",
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Scrape Website",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown": {
      "main": [
        [
          {
            "node": "SEO Blog Analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "validate-input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape Website": {
      "main": [
        [
          {
            "node": "Markdown",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "analyze-robots": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "validate-input": {
      "main": [
        [
          {
            "node": "Check robots.txt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check robots.txt": {
      "main": [
        [
          {
            "node": "analyze-robots",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SEO Blog Analysis": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Respond to Webhook1": {
      "main": [
        [
          {
            "node": "No Operation, do nothing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}