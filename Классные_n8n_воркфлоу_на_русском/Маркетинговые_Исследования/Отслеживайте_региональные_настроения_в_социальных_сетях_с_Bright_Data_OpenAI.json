{
  "id": "M7Yn4F1dlwkiUFNt",
  "meta": {
    "instanceId": "c38e3b8a7e4240e6cdca062743f016c1029f385bf40345b6291939dfd83bfd77",
    "templateCredsSetupCompleted": true
  },
  "name": "* *–ù–æ–≤–æ–µ –∏–º—è:* `üîò –ó–∞–ø—É—Å–∫: –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å`",
  "tags": [],
  "nodes": [
    {
      "id": "a1c3cd68-4f17-4b37-a65d-aa2708eb037d",
      "name": "üîò Trigger: Manual Execution",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -440,
        -100
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "45d63021-fdb1-449f-a588-fc1263d9ebd0",
      "name": "üåê Set Yelp URL (Weather Posts - Los Angeles)",
      "type": "n8n-nodes-base.set",
      "position": [
        -240,
        -100
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "01728220-5a24-45b8-aa1c-54d5ea541d7c",
              "name": "URL",
              "type": "string",
              "value": "https://www.yelp.com/search?find_desc=weather&find_loc=Los+Angeles%2C+CA%2C+United+States"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "254f2185-722c-4bf8-85e1-87a36ab88371",
      "name": "üí¨ AI Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -60,
        160
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "kmqnyfHdWfA8k1KC",
          "name": "OpenAi account 3"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "8af55964-2e46-4bff-bcce-51a474e5acdc",
      "name": "üåê MCP Client: Scrape Weather Posts Data",
      "type": "n8n-nodes-mcp.mcpClientTool",
      "position": [
        80,
        160
      ],
      "parameters": {
        "toolName": "scrape_as_markdown",
        "operation": "executeTool",
        "toolParameters": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Tool_Parameters', ``, 'json') }}"
      },
      "credentials": {
        "mcpClientApi": {
          "id": "dGu6Ys11ijXSTxcV",
          "name": "MCP Client (STDIO) account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "fed36ea2-824e-4052-a58a-a6c9be121f8d",
      "name": "ü§ñ AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        20,
        -100
      ],
      "parameters": {
        "text": "=You are a data extraction agent.\n\nScrape the following Yelp search page for weather-related content in Los Angeles:\n{{ $json.URL }}\n\nFor each business or post, extract the following details:\n\n- `business_name`: The name of the business or event.\n- `location`: The location of the business or event.\n- `rating`: The Yelp rating of the business.\n- `reviews_count`: The number of reviews the business has.\n- `post_text`: The description or content provided about the weather (if available).\n- `weather_related`: Any mention, problem, or fun of weather in the description or reviews (if available).\n\nAdditionally, perform **sentiment analysis** on the extracted weather-related text, and categorize the sentiment as **Positive**, **Negative**, or **Neutral**.\n\nBased on the sentiment, create a **tailored campaign** for each weather-related post:\n- **Positive Sentiment**: Recommend promoting **outdoor activities** or **sunny weather products** (e.g., sunscreen, sunglasses).\n- **Negative Sentiment**: Suggest offering **rain-related products**, **indoor activities**, or **solutions** (e.g., umbrellas, warm drinks).\n- **Neutral Sentiment**: Suggest promoting **general services** or **upcoming events**.\n\n",
        "options": {},
        "promptType": "define",
        "hasOutputParser": true
      },
      "typeVersion": 2
    },
    {
      "id": "56af8e64-3846-4002-b421-99e932cf22a2",
      "name": "üìã Create Trello Card for Weather Campaign",
      "type": "n8n-nodes-base.trello",
      "position": [
        480,
        -100
      ],
      "parameters": {
        "name": "Campaign ",
        "description": "=–ö–∞–º–ø–∞–Ω–∏—è –ø–æ –ø–æ–≥–æ–¥–µ –≤ –õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å–µ:",
        "additionalFields": {
          "due": ""
        }
      },
      "typeVersion": 1
    },
    {
      "id": "e733ffb4-a7c2-423c-af5b-cd0e973f0f5d",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -480,
        -820
      ],
      "parameters": {
        "color": 2,
        "width": 400,
        "height": 900,
        "content": "–ó–∞–≥–æ–ª–æ–≤–æ–∫: {{ $json.output[0].trello_card.title }}"
      },
      "typeVersion": 1
    },
    {
      "id": "a910ba45-e62f-4e70-9ed3-f9aaf6963845",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -60,
        -1140
      ],
      "parameters": {
        "color": 3,
        "width": 420,
        "height": 1220,
        "content": "–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: {{ $json.output[0].location }}"
      },
      "typeVersion": 1
    },
    {
      "id": "6edd6577-fe4d-435d-8d9e-02baeb31704c",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        380,
        -860
      ],
      "parameters": {
        "color": 5,
        "width": 300,
        "height": 940,
        "content": "–û–ø–∏—Å–∞–Ω–∏–µ: {{ $json.output[0].trello_card.description }}"
      },
      "typeVersion": 1
    },
    {
      "id": "42c87047-da6a-4bac-9a02-d7819ef3aa67",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2000,
        -1400
      ],
      "parameters": {
        "color": 4,
        "width": 1300,
        "height": 2720,
        "content": "-### üîπ **–†–ê–ó–î–ï–õ 1: –í–≤–æ–¥ URL –∏ –∑–∞–ø—É—Å–∫ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞**"
      },
      "typeVersion": 1
    },
    {
      "id": "340f317f-0113-4a3b-bb31-eb4ce34eef4a",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        720,
        -860
      ],
      "parameters": {
        "color": 7,
        "width": 380,
        "height": 240,
        "content": "#### üß© **–£–∑–ª—ã:**"
      },
      "typeVersion": 1
    },
    {
      "id": "cbc65d92-9fe7-44ea-820c-14d8557c313b",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2000,
        -1740
      ],
      "parameters": {
        "color": 4,
        "width": 1300,
        "height": 320,
        "content": "**‚ö° –ó–∞–ø—É—Å–∫: –†—É—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**"
      },
      "typeVersion": 1
    },
    {
      "id": "6b29563e-2b13-4a93-8b68-2086d90892cd",
      "name": "Auto-fixing Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserAutofixing",
      "position": [
        200,
        160
      ],
      "parameters": {
        "options": {}
      },
      "typeVersion": 1
    },
    {
      "id": "36cfc69b-af9d-4d89-beef-fffba452e27e",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        160,
        380
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "kmqnyfHdWfA8k1KC",
          "name": "OpenAi account 3"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "fc53117e-62fb-49a7-89af-2c0d7d3413af",
      "name": "üìù Parse Scraped Data into JSON Format1",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        340,
        380
      ],
      "parameters": {
        "jsonSchemaExample": "[\n  {\n    \"business_name\": \"About Time\",\n    \"location\": \"Wilshire Center, Los Angeles, CA\",\n    \"rating\": \"3.5\",\n    \"reviews_count\": 478,\n    \"post_text\": \"I love the garden, I want to sit inside in cold weather but there is no space. It is a very nice...\",\n    \"weather_related\": \"Mention of cold weather and a garden suitable for sitting.\",\n    \"sentiment\": \"Positive\",\n    \"campaign_suggestion\": \"Promote outdoor activities and cozy garden seating for cooler weather.\",\n    \"trello_card\": {\n      \"title\": \"Campaign for About Time - Mention of cold weather and a garden suitable for sitting.\",\n      \"description\": \"Location: Wilshire Center, Los Angeles, CA\\nRating: 3.5\\nReviews Count: 478\\nSentiment: Positive\\nCampaign: Promote outdoor activities and cozy garden seating for cooler weather.\",\n      \"due_date\": \"2025-07-06\",\n      \"labels\": [\"Positive\"]\n    }\n  },\n  {\n    \"business_name\": \"Grand Heating and Air Conditioning\",\n    \"location\": \"Los Angeles, CA\",\n    \"rating\": \"3.2\",\n    \"reviews_count\": 34,\n    \"post_text\": \"Well, come the summer of 2015 and the weather was hot enough for me to decide that the time had come...\",\n    \"weather_related\": \"Hot weather leading to decision to use HVAC services.\",\n    \"sentiment\": \"Neutral\",\n    \"campaign_suggestion\": \"Promote HVAC services for summer heat and general weather comfort solutions.\",\n    \"trello_card\": {\n      \"title\": \"Campaign for Grand Heating and Air Conditioning - Hot weather leading to HVAC use.\",\n      \"description\": \"Location: Los Angeles, CA\\nRating: 3.2\\nReviews Count: 34\\nSentiment: Neutral\\nCampaign: Promote HVAC services for summer heat and general weather comfort solutions.\",\n      \"due_date\": \"2025-07-06\",\n      \"labels\": [\"Neutral\"]\n    }\n  },\n  {\n    \"business_name\": \"Ravenswood Apartments\",\n    \"location\": \"Hancock Park, Los Angeles, CA\",\n    \"rating\": \"1.9\",\n    \"reviews_count\": 14,\n    \"post_text\": \"The weather was getting warmer so I managed to catch Gabriella mgr in the lobby one day, and asked...\",\n    \"weather_related\": \"Mention of warming weather.\",\n    \"sentiment\": \"Neutral\",\n    \"campaign_suggestion\": \"Promote general services or upcoming community events for residents.\",\n    \"trello_card\": {\n      \"title\": \"Campaign for Ravenswood Apartments - Mention of warming weather.\",\n      \"description\": \"Location: Hancock Park, Los Angeles, CA\\nRating: 1.9\\nReviews Count: 14\\nSentiment: Neutral\\nCampaign: Promote general services or upcoming community events for residents.\",\n      \"due_date\": \"2025-07-06\",\n      \"labels\": [\"Neutral\"]\n    }\n  },\n  {\n    \"business_name\": \"Harbor City\",\n    \"location\": \"Harbor City, Los Angeles, CA\",\n    \"rating\": \"5.0\",\n    \"reviews_count\": 1,\n    \"post_text\": \"South of Carson, North of San Pedro. One of those areas of LA that don't get as much attention as their surrounding neighbors for one reason or...\",\n    \"weather_related\": \"No direct weather mention despite search context.\",\n    \"sentiment\": \"Neutral\",\n    \"campaign_suggestion\": \"Promote local neighborhood features and upcoming events.\",\n    \"trello_card\": {\n      \"title\": \"Campaign for Harbor City - Promote local neighborhood features.\",\n      \"description\": \"Location: Harbor City, Los Angeles, CA\\nRating: 5.0\\nReviews Count: 1\\nSentiment: Neutral\\nCampaign: Promote local neighborhood features and upcoming events.\",\n      \"due_date\": \"2025-07-06\",\n      \"labels\": [\"Neutral\"]\n    }\n  }\n]\n"
      },
      "typeVersion": 1.3
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "c57bb610-51bd-490f-9277-708ec418b40d",
  "connections": {
    "üí¨ AI Model": {
      "ai_languageModel": [
        [
          {
            "node": "ü§ñ AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Auto-fixing Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Auto-fixing Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "ü§ñ AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "üîò Trigger: Manual Execution": {
      "main": [
        [
          {
            "node": "üåê Set Yelp URL (Weather Posts - Los Angeles)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìù Parse Scraped Data into JSON Format1": {
      "ai_outputParser": [
        [
          {
            "node": "Auto-fixing Output Parser",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "üåê MCP Client: Scrape Weather Posts Data": {
      "ai_tool": [
        [
          {
            "node": "ü§ñ AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "üåê Set Yelp URL (Weather Posts - Los Angeles)": {
      "main": [
        [
          {
            "node": "ü§ñ AI Agent: Scrape Yelp Weather Posts and tailor campaigns",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ü§ñ AI Agent: Scrape Yelp Weather Posts and tailor campaigns": {
      "main": [
        [
          {
            "node": "üìã Create Trello Card for Weather Campaign",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}