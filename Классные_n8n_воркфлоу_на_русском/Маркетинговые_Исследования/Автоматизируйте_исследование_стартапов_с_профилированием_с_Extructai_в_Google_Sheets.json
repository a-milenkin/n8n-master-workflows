{
  "id": "QLS1VSLlm1Y6KG6C",
  "meta": {
    "instanceId": "afeb9bf6b44bcf071458717ba2725fb9cfe8e80d1545ad9879e786f1aaf7a15f"
  },
  "name": "1) Откройте шаблон таблицы Extruct, используя эту ссылку: https://app.extruct.ai/tables/shared/gQlqQK4pQgPDmk81",
  "tags": [],
  "nodes": [
    {
      "id": "68a0cf39-493c-4381-9140-bd9e98774aa7",
      "name": "On form submission",
      "type": "n8n-nodes-base.formTrigger",
      "position": [
        1120,
        160
      ],
      "webhookId": "61233cba-6ff5-4736-a38f-3a53c7428723",
      "parameters": {
        "options": {},
        "formTitle": "Complete Startup Overview",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Name"
            }
          ]
        },
        "formDescription": "Submit a startup’s name or website to gather a full profile"
      },
      "typeVersion": 2.2
    },
    {
      "id": "fdcb2e4f-3539-4813-a6ec-280442f5ed37",
      "name": "Enrich form input",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1520,
        160
      ],
      "parameters": {
        "url": "={{'https://api.extruct.ai/v1/tables/' + $json.EXTRUCT_TABLE_ID + '/rows'}}",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n  \"rows\": [\n    {\n      \"data\": {\n        \"input\": \"{{ $('On form submission').item.json.Name }}\"\n      }\n    }\n  ],\n  \"run\": true\n} ",
        "sendBody": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth"
      },
      "credentials": {
        "httpBearerAuth": {
          "id": "PnJ0FDuGkKYiN4MZ",
          "name": "Bearer Auth account"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "ac0eea8d-b62e-45f0-ac87-e5a1c6d3d1ba",
      "name": "Get status",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1880,
        160
      ],
      "parameters": {
        "url": "=https://api.extruct.ai/v1/tables/{{ $('Variables').item.json.EXTRUCT_TABLE_ID }}",
        "options": {},
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth"
      },
      "credentials": {
        "httpBearerAuth": {
          "id": "PnJ0FDuGkKYiN4MZ",
          "name": "Bearer Auth account"
        }
      },
      "typeVersion": 4.2,
      "alwaysOutputData": true
    },
    {
      "id": "4d8663d5-60fc-48e7-8eb5-3cc2ec4c71f7",
      "name": "If running",
      "type": "n8n-nodes-base.if",
      "position": [
        2060,
        160
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "f8432dca-c337-4644-8163-fa83f12e5ded",
              "operator": {
                "name": "filter.operator.equals",
                "type": "string",
                "operation": "equals"
              },
              "leftValue": "={{ $json.status.run_status }}",
              "rightValue": "=running"
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "0a630d2a-5eef-459e-950a-cd7f4ca4dcd9",
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "position": [
        1700,
        160
      ],
      "webhookId": "10face1b-ef18-4357-ad22-0c4f32e25f90",
      "parameters": {
        "amount": 10
      },
      "typeVersion": 1.1
    },
    {
      "id": "da774bb1-669d-4ba7-8781-5756a4feee14",
      "name": "Get data",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        2340,
        160
      ],
      "parameters": {
        "url": "=https://api.extruct.ai/v1/tables/{{ $('Variables').item.json.EXTRUCT_TABLE_ID }}/data",
        "options": {},
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth"
      },
      "credentials": {
        "httpBearerAuth": {
          "id": "PnJ0FDuGkKYiN4MZ",
          "name": "Bearer Auth account"
        }
      },
      "typeVersion": 4.2,
      "alwaysOutputData": true
    },
    {
      "id": "82527be3-43f1-44f6-b183-bfd87e055377",
      "name": "Import to Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        2660,
        160
      ],
      "parameters": {
        "operation": "appendOrUpdate",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "",
          "cachedResultUrl": "",
          "cachedResultName": ""
        },
        "documentId": {
          "__rl": true,
          "mode": "url",
          "value": ""
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AGhkvHtD8bZNcSya",
          "name": "Google Sheets account"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "95d08fda-590c-474f-bc97-704c4aa15815",
      "name": "Variables",
      "type": "n8n-nodes-base.set",
      "position": [
        1280,
        160
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "1bfeac42-8afa-409a-806c-8262553270ec",
              "name": "=EXTRUCT_TABLE_ID",
              "type": "string",
              "value": "=YOUR_EXTRUCT_TABLE_ID"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "5b77747a-a849-4c4a-9a7d-1985fe0c95bb",
      "name": "Format last input",
      "type": "n8n-nodes-base.code",
      "position": [
        2500,
        160
      ],
      "parameters": {
        "jsCode": "// Get rows from the first object\nconst rows = items[0].json.rows || items[0].json[0]?.rows;\n\n// Take the last row\nconst lastRow = rows[rows.length - 1];\nconst data = lastRow.data;\nlet flatRow = {};\n\n// Transform the data object to a flat object for Sheets\nfor (const key in data) {\n  if (data[key] && data[key].value && data[key].value.answer !== undefined) {\n    flatRow[key] = data[key].value.answer;\n  } else if (data[key] && data[key].value !== undefined) {\n    flatRow[key] = data[key].value;\n  } else {\n    flatRow[key] = '';\n  }\n}\n\nreturn [{ json: flatRow }];"
      },
      "typeVersion": 2
    },
    {
      "id": "f407c881-746e-4c84-badc-5e2e1afd2502",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "parameters": {
        "width": 1020,
        "height": 1640,
        "content": "## Руководство по быстрому старту для полного обзора стартапа"
      },
      "typeVersion": 1
    },
    {
      "id": "bd390841-1163-4644-8795-eaa74892d406",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1080,
        0
      ],
      "parameters": {
        "color": 5,
        "width": 340,
        "height": 340,
        "content": "## 1. Создайте учетную запись Extruct"
      },
      "typeVersion": 1
    },
    {
      "id": "2bff3f63-b3ae-4485-9ba0-d1379940769b",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1480,
        0
      ],
      "parameters": {
        "color": 2,
        "width": 740,
        "height": 340,
        "content": "- Ссылка для регистрации с 2500 бесплатными кредитами: www.extruct.ai/"
      },
      "typeVersion": 1
    },
    {
      "id": "15a45ab8-a32f-4106-8c8b-660ff7e26224",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2280,
        0
      ],
      "parameters": {
        "width": 580,
        "height": 340,
        "content": "## 2. Подготовьте ваши таблицы"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "fe3cd4dc-58c9-4d54-9ecf-5bce47953974",
  "connections": {
    "Wait": {
      "main": [
        [
          {
            "node": "Get status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get data": {
      "main": [
        [
          {
            "node": "Format last input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Variables": {
      "main": [
        [
          {
            "node": "Enrich form input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get status": {
      "main": [
        [
          {
            "node": "If running",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If running": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enrich form input": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format last input": {
      "main": [
        [
          {
            "node": "Import to Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "On form submission": {
      "main": [
        [
          {
            "node": "Variables",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}