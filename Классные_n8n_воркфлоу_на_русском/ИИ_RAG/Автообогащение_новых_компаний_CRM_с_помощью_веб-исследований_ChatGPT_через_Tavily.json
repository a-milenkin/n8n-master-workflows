{
  "id": "Wm8l2EqUfFXbZefy",
  "meta": {
    "instanceId": "68ab8a7bd891eafb85f915471f38591da0135936f93fdf7e27d0ebea24fea950"
  },
  "name": "Авто-обогащение новых CRM компаний с помощью веб-исследований ChatGPT через Tavily",
  "tags": [],
  "nodes": [
    {
      "id": "8a9fac46-d7ca-4b5f-a809-ba9c4be4bb48",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        2320,
        980
      ],
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1",
          "cachedResultName": "gpt-4.1"
        },
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "bo9yE6c6LIEm8seD",
          "name": "OpenAi account 3"
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "a9b15186-9dd1-4b2a-be23-277d6507c6b6",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1880,
        0
      ],
      "parameters": {
        "color": 7,
        "width": 340,
        "height": 980,
        "content": "## 5. настройка триггера вебхука\n* дважды щелкните по узлу\n* Метод HTTP: POST\n* Аутентификация: нет\n\n### Для тестирования: \nСоздайте компанию в CentralStationCRM и нажмите \"Слушать тестовое событие\" на узле незадолго до этого. Вебхук должен быть вызван, и узел должен передать данные.\n\n### Для эксплуатации:\n* переключитесь с \"Тестового URL\" на \"Производственный URL\"\n* скопируйте новый URL вебхука (щелкните по нему)\n* введите новый URL в поле \"URL конечной точки\" в вебхуке CentralStationCRM"
      },
      "typeVersion": 1
    },
    {
      "id": "04f6c697-7838-438e-95bd-db3f226d8238",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1420,
        0
      ],
      "parameters": {
        "color": 7,
        "width": 420,
        "height": 980,
        "content": "## 4. настройка Webhook в CentralStationCRM\n* войдите в CentralStationCRM\n* нажмите на шестеренку в правом верхнем углу\n\n![Настройки аккаунта](https://s3.42he.com/cscrm-marketing-page-production/CSCRM_Settings_edb73dede7.jpg)\n![Webhook](https://s3.42he.com/cscrm-marketing-page-production/CSCRM_Settings_Webhook_0b20350753.jpg)\n* нажмите \"Создать webhook\"\n* введите пароль\n* \"Тип контролируемого объекта\": компания\n* \"Контролируемое событие\": создание\n* для \"URL конечной точки\" введите URL Webhook\n* для \"Вложенные объекты\" введите:\nтеги, адреса, компании\n* Введите имя и описание (например, n8n Test)\n* Установите статус на активный и сохраните"
      },
      "typeVersion": 1
    },
    {
      "id": "2f0f0aa7-ae85-4ff1-aec2-6e78b5b4bdab",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        840
      ],
      "parameters": {
        "color": 7,
        "width": 420,
        "height": 140,
        "content": "## 3. получить URL вебхука из n8n\n* Дважды щелкните по первому узлу в рабочем процессе\n* Щелкните один раз по URL рядом с POST"
      },
      "typeVersion": 1
    },
    {
      "id": "03bbfa92-95b1-4beb-a1b0-fc1a2958093b",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2260,
        0
      ],
      "parameters": {
        "color": 7,
        "width": 500,
        "height": 1160,
        "content": "## 6. настройка Research AI Agent\n### Настройка узла Open AI\n* Зарегистрируйтесь в Open AI\n* Перейдите по адресу [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys)\n* Нажмите на \"Создать новый секретный ключ\"\n* Введите имя и проект для ключа, если применимо\n* Скопируйте API ключ\n\n* Переключитесь на n8n\n* Дважды щелкните по узлу \"OpenAI Chat Model\"\n![Credentials](https://s3.42he.com/cscrm-marketing-page-production/Open_AI_Credetials_2fe0b1622d.png)\n![API Key](https://s3.42he.com/cscrm-marketing-page-production/Open_AI_API_Cred_aa0b80bb1e.jpg)"
      },
      "typeVersion": 1
    },
    {
      "id": "f3b11fd7-2fcf-4fe0-b272-e6326b1c6b53",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2780,
        0
      ],
      "parameters": {
        "color": 7,
        "width": 380,
        "height": 980,
        "content": "## 7. настройка протокола CentralStationCRM\n![CSCRM Credential](https://s3.42he.com/cscrm-marketing-page-production/n8n_Authin_Node_Header_Auth_87f7ac9f20.jpg)\n* Выберите учетные данные, созданные на шаге 1"
      },
      "typeVersion": 1
    },
    {
      "id": "9ffff75c-ae83-4f5a-b656-3fea3da62e70",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        0
      ],
      "parameters": {
        "color": 7,
        "width": 420,
        "height": 820,
        "content": "## 2. настройка учетных данных CentralStationCRM n8n\n![n8n меню](https://s3.42he.com/cscrm-marketing-page-production/n8n_menu_credential_c73f8802bb.png)\n![n8n тип учетных данных](https://s3.42he.com/cscrm-marketing-page-production/n8n_Header_Auth_f635973075.png)\n![n8n cscrm apikey](https://s3.42he.com/cscrm-marketing-page-production/n8n_cscrm_credential_9690dfc9a2.jpg)\nВажно:\n* выберите Header Auth в качестве типа учетных данных\n* назначьте X-apikey в качестве имени\n* введите API-ключ CentralStationCRM в поле \"Значение\""
      },
      "typeVersion": 1
    },
    {
      "id": "9c9d77d8-159c-4e52-aad0-d2ccfcb84ac5",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        780
      ],
      "parameters": {
        "width": 460,
        "height": 200,
        "content": "## Инструменты в этом рабочем процессе\n* [CentralStationCRM](https://centralstationcrm.de), простое и интуитивно понятное CRM-программное обеспечение для небольших команд. [Вот наша документация по API](https://api.centralstationcrm.net/api-docs/index.html), если вы хотите настроить рабочий процесс.\n* [ChatGPT](https://openai.com), известный AI-чатбот\n* [Tavily](https://www.tavily.com/), веб-сервис поиска для больших языковых моделей"
      },
      "typeVersion": 1
    },
    {
      "id": "f387821a-8be9-46b9-9435-212c704a558c",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "parameters": {
        "width": 460,
        "height": 740,
        "content": "![CSCRM Логотип](https://s3.42he.com/cscrm-marketing-page-production/Logo_Central_Station_CRM_0dd02e23d2.jpeg)\n# Авто-обогащение новых компаний CRM с помощью веб-исследований ChatGPT через Tavily\n\nВ этом рабочем процессе вы используете **ChatGPT** в сочетании с **инструментом веб-поиска Tavily**.\n\n* вебхук срабатывает, когда новая компания создается в CRM\n* данные компании передаются в ChatGPT\n* ИИ-агент ищет информацию в интернете с помощью Tavily и преобразует информацию в формат Markdown\n* Заметка с полученной информацией добавляется в ваш CRM\n\n\n\n*Чтобы редактировать узлы: Просто дважды щелкните!\n\n*В самом конце: Установите переключатель рабочего процесса в положение \"Активен\"."
      },
      "typeVersion": 1
    },
    {
      "id": "4a3a7718-ff96-4ef5-90fe-6d03f0d81c25",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        500,
        0
      ],
      "parameters": {
        "color": 7,
        "width": 420,
        "height": 980,
        "content": "## 1. настройка API-ключа CentralStationCRM\n* войдите в CentralStationCRM\n* нажмите на шестеренку в правом верхнем углу\n\n![Accounteinstellungen](https://s3.42he.com/cscrm-marketing-page-production/CSCRM_Settings_edb73dede7.jpg)\n![API Schlüssel](https://s3.42he.com/cscrm-marketing-page-production/CSCRM_Settings_API_cec6e99236.jpg)\n* нажмите \"Создать API-ключ\" справа\n* введите \"Описание\" (например, n8n Test)\n* сохраните\n* сохраните API-ключ! Ключ нельзя будет вызвать снова в CRM и он необходим для шага 2."
      },
      "typeVersion": 1
    },
    {
      "id": "0cd3cfc1-74f4-400a-a5b7-0811d600ec4e",
      "name": "Research AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2380,
        800
      ],
      "parameters": {
        "text": "=We are a small consulting firm specialised on sales and marketing consulting. \n\nDo a deep research in German about the company \"{{ $json.body.record.name }}\". The research shall help sales people get a good overview about the company and allow to identify potential opportunities.\n\nUse the following structure:\n\n```markdown\n- **Name:** Firmenname\n- **Webseite:** http://foobar.com\n- **Zentrale:** San Francisco ([1](http://foobar))\n- **Gründungsjahr:** 2018 ([1](http://...), [2](http://...))\n- **Anzahl der Mitarbeiter:** 123 ([1](...))\n\nAllgemeine Beschreibung der Firma, inklusive Quellen. ([1](http://source))\n\n## Social media\n\n- **Linked In:** http://...\n- **Facebook:** http://...\n```\n\nThis structure is not complete, you can add more facts, social media sites or sections. You can use multiple searches, use more specific search queries if there are important facts missing. Add sources to every fact you mention.\n\nRespond only with the markdown itself, do not start with ```markdown.",
        "options": {},
        "promptType": "define"
      },
      "typeVersion": 2
    },
    {
      "id": "e61f2c0b-defd-4e91-8e01-e9dc6c71e0ce",
      "name": "a mind space prompt for the ai",
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "position": [
        2660,
        980
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "c4d18a52-57d1-4c9e-b8f8-f29440d12d38",
      "name": "Tavily Websearch Extract URLs",
      "type": "@tavily/n8n-nodes-tavily.tavilyTool",
      "position": [
        2560,
        1120
      ],
      "parameters": {
        "urls": [
          "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('urls0_URLs', ``, 'string') }}"
        ],
        "options": {},
        "resource": "extract"
      },
      "credentials": {
        "tavilyApi": {
          "id": "ORAd9u0WAvNAofCP",
          "name": "Tavily account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "f8af5e5a-d411-4888-904a-d8f3df1be67e",
      "name": "Tavily Websearch Search the Web",
      "type": "@tavily/n8n-nodes-tavily.tavilyTool",
      "position": [
        2400,
        1120
      ],
      "parameters": {
        "query": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Query', ``, 'string') }}",
        "options": {
          "max_results": 15,
          "search_depth": "advanced"
        }
      },
      "credentials": {
        "tavilyApi": {
          "id": "ORAd9u0WAvNAofCP",
          "name": "Tavily account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "589de93d-74f3-4bde-a5da-8f92b572c59b",
      "name": "Add a note to company in CentralStationCRM",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        2920,
        800
      ],
      "parameters": {
        "url": "https://api.centralstationcrm.net/api/protocols.json",
        "method": "POST",
        "options": {},
        "jsonBody": "={\n  \"protocol\": {\n    \"company_ids\": [{{ $('Company created in CentralStationCRM').item.json.body.record.id }}],\n    \"type\": \"ProtocolObjectNote\",\n    \"badge\": \"note\",\n    \"content\": {{ $json.output.toJsonString() }},\n    \"format\": \"markdown\"\n  }\n} \n",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "pqUNcvQBnqpxmMAD",
          "name": "Header Auth CSCRM test16"
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "922a8cd5-ef4a-45a2-97fb-932c98ee7d8d",
      "name": "Company created in CentralStationCRM",
      "type": "n8n-nodes-base.webhook",
      "position": [
        2000,
        800
      ],
      "webhookId": "c8682af5-17b7-48f5-9be3-49ef787b40e5",
      "parameters": {
        "path": "c8682af5-17b7-48f5-9be3-49ef787b40e5",
        "options": {},
        "httpMethod": "POST"
      },
      "typeVersion": 2
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "16f5b624-473c-424a-be92-f62e08907ce2",
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Research AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Research AI Agent": {
      "main": [
        [
          {
            "node": "Add a note to company in CentralStationCRM",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tavily Websearch Extract URLs": {
      "ai_tool": [
        [
          {
            "node": "Research AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "a mind space prompt for the ai": {
      "ai_tool": [
        [
          {
            "node": "Research AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Tavily Websearch Search the Web": {
      "ai_tool": [
        [
          {
            "node": "Research AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Company created in CentralStationCRM": {
      "main": [
        [
          {
            "node": "Research AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}