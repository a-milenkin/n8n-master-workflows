{
  "id": "Ub9navVkcvzlgJJZ",
  "meta": {
    "instanceId": "eeebdb47cbe0bf5bc137514a863458fd2f9ab992b2ebeb2c6062100cdade81e7",
    "templateCredsSetupCompleted": true
  },
  "name": "СоздатьКлиентов",
  "tags": [
    {
      "id": "vMF1giVsFs9aUam0",
      "name": "shopify",
      "createdAt": "2025-06-11T02:39:27.034Z",
      "updatedAt": "2025-06-11T02:39:27.034Z"
    },
    {
      "id": "VV6xlvjylfTgqbEQ",
      "name": "gsheet",
      "createdAt": "2025-06-11T02:39:33.368Z",
      "updatedAt": "2025-06-11T02:39:33.368Z"
    },
    {
      "id": "cWC39BXOsHlOhwEC",
      "name": "google-sheet",
      "createdAt": "2025-06-11T02:39:38.743Z",
      "updatedAt": "2025-06-11T02:39:38.743Z"
    }
  ],
  "nodes": [
    {
      "id": "477e1ae3-92d1-4bc4-a232-177f30c12bd5",
      "name": "Start Workflow",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -500,
        -60
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "2be0e108-296c-4eaa-ad58-883923416470",
      "name": "Google Sheet, Fetch Customers",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -140,
        -60
      ],
      "parameters": {
        "options": {},
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 2054184606,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IxiuRiu6XKBkEa1NIUebBWn73jIKUrgE9Sqj4XtQgBk/edit#gid=2054184606",
          "cachedResultName": "Customers"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1IxiuRiu6XKBkEa1NIUebBWn73jIKUrgE9Sqj4XtQgBk",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IxiuRiu6XKBkEa1NIUebBWn73jIKUrgE9Sqj4XtQgBk/edit?usp=drivesdk",
          "cachedResultName": "Shopify Test Store Data"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "GQE41DhnGDDJ8Hfq",
          "name": "Google Sheets account"
        }
      },
      "typeVersion": 4.6
    },
    {
      "id": "2aae5550-f480-49b0-9e69-b299756963ce",
      "name": "Shopify, CustomerCreate",
      "type": "n8n-nodes-base.graphql",
      "position": [
        280,
        -60
      ],
      "parameters": {
        "query": "=mutation customerCreate($input: CustomerInput!) {\n    customerCreate(input: $input) {\n        userErrors {\n            field\n            message\n        }\n        customer {\n            id\n            email\n            phone\n            taxExempt\n            firstName\n            lastName\n            amountSpent {\n                amount\n                currencyCode\n            }\n            smsMarketingConsent {\n                marketingState\n                marketingOptInLevel\n                consentUpdatedAt\n            }\n        }\n    }\n}",
        "endpoint": "https://store99563.myshopify.com/admin/api/2025-04/graphql.json",
        "variables": "={\n    \"input\": {\n        \"email\": \"{{ $json.email }}\",\n        \"phone\": \"{{ $json.mobile_phone }}\",\n        \"firstName\": \"{{ $json.first_name }}\",\n        \"lastName\": \"{{ $json.last_name }}\",\n        \"smsMarketingConsent\": {\n            \"marketingState\": \"SUBSCRIBED\",\n            \"marketingOptInLevel\": \"SINGLE_OPT_IN\"\n        }\n    }\n}",
        "authentication": "headerAuth"
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "mHtpN3u5aCWsxWih",
          "name": "Shopify GraphQL Header Auth account"
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "76d165e1-6beb-475c-bd94-ed0f30ef0d06",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -300,
        140
      ],
      "parameters": {
        "width": 400,
        "height": 320,
        "content": "## Формат Google Таблицы\n\nСтолбцы могут быть в любом порядке. N8N будет рассматривать первую строку в таблице как название столбца, поэтому используйте названия столбцов ниже в строке 1 вашей таблицы. Google Таблица использует следующие столбцы: \n- first_name : Любая строка\n- last_name : Любая строка\n- email : Действительный адрес электронной почты \n- mobile_phone : Международный формат мобильного телефона без пробелов, например, +61414708406 (Shopify отклонит все остальное)."
      },
      "typeVersion": 1
    },
    {
      "id": "01df3900-33ae-4f8b-b63a-d48ee012c2ea",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        160,
        140
      ],
      "parameters": {
        "width": 400,
        "height": 680,
        "content": "## Shopify Admin API (GraphQL)\n\nAPI администратора Shopify использует 'Header Auth' с **ключом** X-Shopify-Access-Token и **значением** вашего токена доступа Shopify, который начинается с shpat_ .\n\n### Как сгенерировать токен доступа Shopify\nЧтобы сгенерировать токен доступа Shopify, создайте приложение, предоставьте приложению необходимые разрешения, а затем сгенерируйте токен.\n\n#### Внутри магазина выполните следующие действия:\n1. нажмите Настройки (ссылка навигации)\n2. нажмите Приложения и каналы продаж (ссылка навигации)\n3. нажмите Разработать приложения (кнопка)\n4. нажмите Создать приложение (кнопка)\n5. дайте приложению имя\n6. нажмите настроить разрешения API администратора (кнопка)\n7. как минимум предоставьте разрешения read_customers и write_customers. Предоставьте дополнительные разрешения, если планируете получать доступ к другим частям API.\n8. нажмите сохранить\n\n#### Чтобы сгенерировать токен\n1. нажмите установить приложение (кнопка)\n2. нажмите установить в диалоговом окне, которое появится (кнопка)\n3. нажмите 'показать токен один раз' (кнопка)\n4. скопируйте токен в хранилище паролей или в безопасное место."
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "13bf8d4d-bd24-4b1d-be18-70e131443179",
  "connections": {
    "Start Workflow": {
      "main": [
        [
          {
            "node": "Google Sheet, Fetch Customers",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheet, Fetch Customers": {
      "main": [
        [
          {
            "node": "Shopify, CustomerCreate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}